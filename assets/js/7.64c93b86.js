(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{278:function(s,t,a){s.exports=a.p+"assets/img/è¿›ç¨‹æ§åˆ¶å—PCB.03966435.png"},279:function(s,t,a){s.exports=a.p+"assets/img/çº¿ç¨‹åŒæ­¥.3130570c.png"},383:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"è¿›ç¨‹å’Œçº¿ç¨‹åŸºç¡€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¿›ç¨‹å’Œçº¿ç¨‹åŸºç¡€"}},[s._v("#")]),s._v(" è¿›ç¨‹å’Œçº¿ç¨‹åŸºç¡€")]),s._v(" "),t("h2",{attrs:{id:"ç›®å½•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç›®å½•"}},[s._v("#")]),s._v(" ç›®å½•")]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#ç›®å½•"}},[s._v("ç›®å½•")])]),t("li",[t("a",{attrs:{href:"#_1-çº¿ç¨‹å’Œè¿›ç¨‹è®¤çŸ¥"}},[s._v("1.çº¿ç¨‹å’Œè¿›ç¨‹è®¤çŸ¥")]),t("ul",[t("li",[t("a",{attrs:{href:"#_1-1-æ¦‚å¿µ-å¤šä»»åŠ¡"}},[s._v("1.1.æ¦‚å¿µï¼šå¤šä»»åŠ¡")])]),t("li",[t("a",{attrs:{href:"#_1-2-q-å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„å¯¹æ¯”-ä¸»è¦ä¼˜åŠ¿å¯¹æ¯”"}},[s._v("1.2.Qï¼šå¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„å¯¹æ¯”ï¼Œä¸»è¦ä¼˜åŠ¿å¯¹æ¯”")])]),t("li",[t("a",{attrs:{href:"#_1-3-q-ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹"}},[s._v("1.3.Qï¼šä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹ï¼Ÿ")])]),t("li",[t("a",{attrs:{href:"#_1-4-q-ä¸ºä»€ä¹ˆä»»ä½•ä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰éƒ½å¯èƒ½ç›´æ¥é€ æˆæ•´ä¸ªè¿›ç¨‹å´©æºƒ"}},[s._v("1.4.Qï¼šä¸ºä»€ä¹ˆä»»ä½•ä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰éƒ½å¯èƒ½ç›´æ¥é€ æˆæ•´ä¸ªè¿›ç¨‹å´©æºƒï¼Ÿ")])])])]),t("li",[t("a",{attrs:{href:"#_0-å›¾è¡¨è®°å¿†"}},[s._v("0.å›¾è¡¨è®°å¿†")]),t("ul",[t("li",[t("a",{attrs:{href:"#å›¾1-è¿›ç¨‹æ§åˆ¶å—-pcb"}},[s._v("å›¾1.è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰")])]),t("li",[t("a",{attrs:{href:"#è§£é‡Šå›¾1-è¿›ç¨‹æ§åˆ¶å—-pcb"}},[s._v("è§£é‡Šå›¾1.è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰")])])])]),t("li",[t("a",{attrs:{href:"#_1-è¿›ç¨‹å’Œçº¿ç¨‹å¯¹æ¯”"}},[s._v("1.è¿›ç¨‹å’Œçº¿ç¨‹å¯¹æ¯”")])]),t("li",[t("a",{attrs:{href:"#_2-è¿›ç¨‹åŒæ­¥ã€7ä¾ ä¼ ã€"}},[s._v("2.è¿›ç¨‹åŒæ­¥ã€7ä¾ ä¼ ã€")])]),t("li",[t("a",{attrs:{href:"#_3-çº¿ç¨‹åŒæ­¥æŠ€æœ¯ã€4å¤§å¤©ç‹ã€"}},[s._v("3.çº¿ç¨‹åŒæ­¥æŠ€æœ¯ã€4å¤§å¤©ç‹ã€")])]),t("li",[t("a",{attrs:{href:"#_4-ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»-ç¼–ç é“¾æ¥å’Œåº“åˆ†ç±»"}},[s._v("4.ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ï¼Œç¼–ç é“¾æ¥å’Œåº“åˆ†ç±»")])])])]),t("p"),s._v(" "),t("p",[s._v("[TOC]")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://sunweiguo.github.io/2019/11/17/miscellany/20%E5%85%B3%E4%BA%8E%E5%A4%9ACPU%E5%92%8C%E5%A4%9A%E6%A0%B8CPU%E7%9A%84%E5%8C%BA%E5%88%AB/",target:"_blank",rel:"noopener noreferrer"}},[s._v("å…³äºå¤šCPUå’Œå¤šæ ¸CPUçš„åŒºåˆ«"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-txt"}},[t("code",[s._v("å¤šè¿›ç¨‹ã€è¿›ç¨‹åŒæ­¥ã€è¿›ç¨‹æ± \nå¤šçº¿ç¨‹ã€çº¿ç¨‹åŒæ­¥ã€çº¿ç¨‹æ± \nåç¨‹\nåŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡ã€è½®è¯¢\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("å¤šçº¿ç¨‹-æ–°æ—¶ä»£çš„å® å„¿")]),s._v(" "),t("p",[s._v("ã€å•æ ¸CPUã€æ—¶ä»£å’Œã€å¤šæ ¸CPU/å¤šCPUã€æ—¶ä»£")])]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-txt"}},[t("code",[s._v("1ã€å•CPUä¸­è¿›ç¨‹åªèƒ½æ˜¯å¹¶å‘ï¼Œå¤šCPUè®¡ç®—æœºä¸­è¿›ç¨‹å¯ä»¥å¹¶è¡Œ\n2ã€ã€å•CPUã€ã€å•æ ¸ã€ä¸­çº¿ç¨‹åªèƒ½å¹¶å‘ï¼Œã€å•CPUã€ã€å¤šæ ¸ã€ä¸­çº¿ç¨‹å¯ä»¥å¹¶è¡Œ\n3ã€æ— è®ºæ˜¯å¹¶å‘è¿˜æ˜¯å¹¶è¡Œï¼Œä½¿ç”¨è€…æ¥çœ‹ï¼Œçœ‹åˆ°çš„æ˜¯å¤šè¿›ç¨‹ï¼Œå¤šçº¿ç¨‹\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"_1-çº¿ç¨‹å’Œè¿›ç¨‹è®¤çŸ¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-çº¿ç¨‹å’Œè¿›ç¨‹è®¤çŸ¥"}},[s._v("#")]),s._v(" 1.çº¿ç¨‹å’Œè¿›ç¨‹è®¤çŸ¥")]),s._v(" "),t("h3",{attrs:{id:"_1-1-æ¦‚å¿µ-å¤šä»»åŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-æ¦‚å¿µ-å¤šä»»åŠ¡"}},[s._v("#")]),s._v(" 1.1.æ¦‚å¿µï¼šå¤šä»»åŠ¡")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å¤šä»»åŠ¡")]),s._v("å¯ä»¥ç”±"),t("strong",[s._v("å¤šè¿›ç¨‹")]),s._v("å®Œæˆï¼Œä¹Ÿå¯ä»¥ç”±ä¸€ä¸ªè¿›ç¨‹å†…çš„"),t("strong",[s._v("å¤šçº¿ç¨‹")]),s._v("å®Œæˆã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_1-2-q-å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„å¯¹æ¯”-ä¸»è¦ä¼˜åŠ¿å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-q-å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„å¯¹æ¯”-ä¸»è¦ä¼˜åŠ¿å¯¹æ¯”"}},[s._v("#")]),s._v(" 1.2.Qï¼šå¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„å¯¹æ¯”ï¼Œä¸»è¦ä¼˜åŠ¿å¯¹æ¯”")]),s._v(" "),t("ul",[t("li",[s._v("å¤šè¿›ç¨‹æ¨¡å‹ï¼Œé€‚ç”¨äºï¼šCPUå¯†é›†å‹")]),s._v(" "),t("li",[s._v("å¤šçº¿ç¨‹æ¨¡å‹ï¼Œ"),t("strong",[s._v("ä¸»è¦ä¼˜åŠ¿")]),s._v("ä¸ºï¼šçº¿ç¨‹é—´åˆ‡æ¢ä»£ä»·è¾ƒå°‘ï¼Œå› æ­¤é€‚ç”¨äºI/Oå¯†é›†å‹çš„å·¥ä½œåœºæ™¯ã€‚\n"),t("ul",[t("li",[s._v("ã€å› æ­¤ï¼ŒI/Oå¯†é›†å‹çš„å·¥ä½œåœºæ™¯ç»å¸¸ä¼šç”±äº"),t("strong",[s._v("I/Oé˜»å¡")]),s._v("å¯¼è‡´"),t("strong",[s._v("é¢‘ç¹çš„åˆ‡æ¢çº¿ç¨‹")]),s._v("ã€‚")])])])]),s._v(" "),t("h3",{attrs:{id:"_1-3-q-ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-q-ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹"}},[s._v("#")]),s._v(" 1.3.Qï¼šä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹ï¼Ÿ")]),s._v(" "),t("ul",[t("li",[s._v("å¤šçº¿ç¨‹å¯ä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ€§èƒ½")])]),s._v(" "),t("blockquote",[t("p",[s._v("ç»§ç»­è¡¥å……ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_1-4-q-ä¸ºä»€ä¹ˆä»»ä½•ä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰éƒ½å¯èƒ½ç›´æ¥é€ æˆæ•´ä¸ªè¿›ç¨‹å´©æºƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-q-ä¸ºä»€ä¹ˆä»»ä½•ä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰éƒ½å¯èƒ½ç›´æ¥é€ æˆæ•´ä¸ªè¿›ç¨‹å´©æºƒ"}},[s._v("#")]),s._v(" 1.4.Qï¼šä¸ºä»€ä¹ˆä»»ä½•ä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰éƒ½å¯èƒ½ç›´æ¥é€ æˆæ•´ä¸ªè¿›ç¨‹å´©æºƒï¼Ÿ")]),s._v(" "),t("ul",[t("li",[s._v("å¤šçº¿ç¨‹æ¨¡å¼è‡´å‘½çš„ç¼ºç‚¹å°±æ˜¯ï¼šå› ä¸ºæ‰€æœ‰çº¿ç¨‹ã€å…±äº«è¿›ç¨‹çš„å†…å­˜ã€")])]),s._v(" "),t("h2",{attrs:{id:"_0-å›¾è¡¨è®°å¿†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_0-å›¾è¡¨è®°å¿†"}},[s._v("#")]),s._v(" 0.å›¾è¡¨è®°å¿†")]),s._v(" "),t("h3",{attrs:{id:"å›¾1-è¿›ç¨‹æ§åˆ¶å—-pcb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å›¾1-è¿›ç¨‹æ§åˆ¶å—-pcb"}},[s._v("#")]),s._v(" å›¾1.è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰")]),s._v(" "),t("img",{attrs:{src:a(278)}}),s._v(" "),t("h3",{attrs:{id:"è§£é‡Šå›¾1-è¿›ç¨‹æ§åˆ¶å—-pcb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è§£é‡Šå›¾1-è¿›ç¨‹æ§åˆ¶å—-pcb"}},[s._v("#")]),s._v(" è§£é‡Šå›¾1.è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰")]),s._v(" "),t("p",[s._v("ä¸ºäº†ç®¡ç†è¿›ç¨‹ï¼Œå†…æ ¸å¿…é¡»å¯¹æ¯ä¸ªè¿›ç¨‹æ‰€åšçš„äº‹æƒ…è¿›è¡Œã€æ¸…æ¥šçš„æè¿°ã€ã€‚\nå†…æ ¸ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ª"),t("code",[s._v("PCB(Processing Control Block)")]),s._v("è¿›ç¨‹æ§åˆ¶å—ï¼Œç»´æŠ¤è¿›ç¨‹ç›¸å…³çš„ä¿¡æ¯ï¼ŒLinuxå†…æ ¸çš„è¿›ç¨‹æ§åˆ¶å—æ˜¯task_structç»“æ„ä½“ã€‚")]),s._v(" "),t("p",[s._v("å…¶å†…éƒ¨æˆå‘˜æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬åªéœ€è¦æŒæ¡ã€"),t("strong",[s._v("ä»¥ä¸‹éƒ¨åˆ†")]),s._v("ã€å³å¯:")]),s._v(" "),t("ul",[t("li",[s._v("è¿›ç¨‹id:ç³»ç»Ÿä¸­æ¯ä¸ªè¿›ç¨‹æœ‰å”¯ä¸€çš„idï¼Œç”¨"),t("code",[s._v("pid_t")]),s._v("ç±»å‹è¡¨ç¤ºï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°")]),s._v(" "),t("li",[s._v("è¿›ç¨‹çš„çŠ¶æ€:æœ‰å°±ç»ªã€è¿è¡Œã€æŒ‚èµ·ã€åœæ­¢ç­‰çŠ¶æ€")]),s._v(" "),t("li",[t("strong",[s._v("è¿›ç¨‹åˆ‡æ¢")]),s._v("æ—¶éœ€è¦ä¿å­˜å’Œæ¢å¤çš„ä¸€äº›"),t("strong",[s._v("CPUå¯„å­˜å™¨")])]),s._v(" "),t("li",[s._v("æè¿°è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä¿¡æ¯")]),s._v(" "),t("li",[s._v("æè¿°æ§åˆ¶ç»ˆç«¯çš„ä¿¡æ¯")]),s._v(" "),t("li",[s._v("å½“å‰å·¥ä½œç›®å½•(Current Working Directory)")]),s._v(" "),t("li",[s._v("umaskæ©ç ")]),s._v(" "),t("li",[s._v("æ–‡ä»¶æè¿°ç¬¦è¡¨ï¼ŒåŒ…å«å¾ˆå¤šæŒ‡å‘"),t("code",[s._v("fileç»“æ„ä½“")]),s._v("çš„æŒ‡é’ˆ")]),s._v(" "),t("li",[s._v("å’Œä¿¡å·ç›¸å…³çš„ä¿¡æ¯")]),s._v(" "),t("li",[s._v("ç”¨æˆ·idå’Œç»„id")]),s._v(" "),t("li",[s._v("ä¼šè¯(Sessionå’Œè¿›ç¨‹ç»„")]),s._v(" "),t("li",[s._v("è¿›ç¨‹å¯ä»¥ä½¿ç”¨çš„èµ„æºä¸Šé™(Resource Limit)")])]),s._v(" "),t("h2",{attrs:{id:"_1-è¿›ç¨‹å’Œçº¿ç¨‹å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-è¿›ç¨‹å’Œçº¿ç¨‹å¯¹æ¯”"}},[s._v("#")]),s._v(" 1.è¿›ç¨‹å’Œçº¿ç¨‹å¯¹æ¯”")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("è¿›ç¨‹")]),s._v("æ˜¯"),t("strong",[s._v("èµ„æºç®¡ç†")]),s._v("çš„æœ€å°å•ä½")]),s._v(" "),t("li",[t("strong",[s._v("çº¿ç¨‹")]),s._v("æ˜¯"),t("strong",[s._v("ç¨‹åºæ‰§è¡Œ")]),s._v("çš„æœ€å°å•ä½ã€å‰ææ˜¯æ”¯æŒçº¿ç¨‹ã€")]),s._v(" "),t("li",[s._v("è®°å¿†æ–¹æ³•ï¼š"),t("br"),s._v(" "),t("font",{staticStyle:{background:"yellow"}},[s._v("å¤§Bossï¼ˆè¿›ç¨‹ï¼‰ï¼Œåªç®¡æ‹¿ç€èµ„æºç»Ÿç­¹å…¼é¡¾ã€‚\nå°å…µï¼ˆçº¿ç¨‹ï¼‰ï¼Œè¦å–åŠ›æ‰§è¡Œå‘½ä»¤")])],1)]),s._v(" "),t("h4",{attrs:{id:"â­ï¸è¿›ç¨‹å’Œçº¿ç¨‹åœ¨ä¸¤å¤§osçš„ç‰¹ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸è¿›ç¨‹å’Œçº¿ç¨‹åœ¨ä¸¤å¤§osçš„ç‰¹ç‚¹"}},[s._v("#")]),s._v(" â­ï¸è¿›ç¨‹å’Œçº¿ç¨‹åœ¨ä¸¤å¤§OSçš„ç‰¹ç‚¹")]),s._v(" "),t("ul",[t("li",[s._v("Windowså¯¹è¿›ç¨‹å’Œçº¿ç¨‹çš„å®ç°å¦‚åŒã€æ•™ç§‘ä¹¦ã€ä¸€èˆ¬æ ‡å‡†ã€‚")])]),s._v(" "),t("blockquote",[t("ul",[t("li",[t("font",{staticStyle:{background:"yellow"}},[s._v("Windowså†…æ ¸ä¸­æœ‰æ˜ç¡®çš„"),t("b",[s._v("è¿›ç¨‹")]),s._v("å’Œ"),t("b",[s._v("çº¿ç¨‹")]),s._v("çš„æ¦‚å¿µ")])],1)])]),s._v(" "),t("ul",[t("li",[s._v("Linuxå†…æ ¸ä¸­"),t("b",[s._v("å¹¶ä¸å­˜åœ¨çœŸæ­£æ„ä¹‰ä¸Š")]),s._v("çš„"),t("b",[s._v("çº¿ç¨‹")]),s._v("çš„æ¦‚å¿µ")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Linuxå°†æ‰€æœ‰çš„æ‰§è¡Œå®ä½“ï¼ˆæ— è®ºæ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹ï¼‰éƒ½ç§°ä¸ºã€ã€ä»»åŠ¡ï¼ˆTaskï¼‰ã€ã€\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" æ¯ä¸ªTaskæ¦‚å¿µä¸Šéƒ½ç±»ä¼¼äºä¸€ä¸ªå•çº¿ç¨‹çš„è¿›ç¨‹ï¼Œå…·æœ‰å†…å­˜ç©ºé—´ã€æ‰§è¡Œå®ä½“ã€æ–‡ä»¶èµ„æºç­‰ã€‚\n    \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" ä¸è¿‡"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Linuxä¸‹ã€ä¸åŒçš„Taskï¼ˆä»»åŠ¡ï¼‰ä¹‹é—´å¯ä»¥é€‰æ‹©å…±äº«å†…å­˜ç©ºé—´ã€ï¼Œå› è€Œåœ¨å®é™…æ„ä¹‰ä¸Šï¼Œå…±äº«äº†åŒä¸€ä¸ªå†…å­˜ç©ºé—´çš„å¤šä¸ªä»»åŠ¡æ„æˆäº†ä¸€ä¸ªè¿›ç¨‹ï¼Œ è¿™äº›ä»»åŠ¡ä¹Ÿå°±æˆäº†è¿™ä¸ªè¿›ç¨‹é‡Œçš„çº¿ç¨‹ã€‚\n    \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Linuxä¸‹çš„çº¿ç¨‹ã€æœ¬è´¨ã€ä¸Šç”¨è¿›ç¨‹å®ç°ã€ç‰›å®¢é¢˜ç›®ã€\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"_2-è¿›ç¨‹åŒæ­¥ã€7ä¾ ä¼ ã€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¿›ç¨‹åŒæ­¥ã€7ä¾ ä¼ ã€"}},[s._v("#")]),s._v(" 2.è¿›ç¨‹åŒæ­¥ã€7ä¾ ä¼ ã€")]),s._v(" "),t("ul",[t("li",[s._v("ä¿è¯2ç‚¹ï¼šè¿›ç¨‹åŒæ­¥ã€æ•°æ®äº¤æ¢")])]),s._v(" "),t("h4",{attrs:{id:"â­ï¸2-1-ç®¡é“-pipe"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸2-1-ç®¡é“-pipe"}},[s._v("#")]),s._v(" â­ï¸2.1.ç®¡é“ï¼ˆPIPEï¼‰")]),s._v(" "),t("blockquote",[t("p",[s._v("(ä½¿ç”¨æœ€ç®€å•)")])]),s._v(" "),t("ul",[t("li",[s._v("æœ‰åç®¡é“")]),s._v(" "),t("li",[s._v("æ— åç®¡é“\n"),t("ul",[t("li",[s._v("è¯­æ³•æœ€æ–¹ä¾¿ï¼Œä»£ç ç¼–å†™é‡æœ€å°‘ã€‚ä¸ç®¡é“å¯¹åº”çš„ï¼Œå¦ä¸€ç§é€šä¿¡æ–¹å¼æ˜¯"),t("strong",[s._v("fifo")]),s._v("ï¼šæˆ‘ä»¬æŠŠå®ƒç§°ä¹‹ä¸ºâ€œæœ‰åç®¡é“â€ï¼Œæ‰€ä»¥æœ‰ä¹¦ï¼Œç§°"),t("strong",[s._v("pipe")]),s._v("ç®¡é“ä¸ºï¼šâ€œæœªåç®¡é“â€æˆ–è€…â€œåŒ¿åç®¡é“â€,ç”¨äºï¼ˆ"),t("strong",[s._v("éè¡€ç¼˜å…³ç³»")]),s._v("è¿›ç¨‹é—´é€šä¿¡ï¼‰")])])])]),s._v(" "),t("h4",{attrs:{id:"â­ï¸2-2-ä¿¡å·é‡-semaphore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸2-2-ä¿¡å·é‡-semaphore"}},[s._v("#")]),s._v(" â­ï¸2.2.ä¿¡å·é‡ï¼ˆSemaphoreï¼‰")]),s._v(" "),t("ul",[t("li",[s._v("æ— åçº¿ç¨‹ä¿¡å·é‡")]),s._v(" "),t("li",[s._v("å‘½åçº¿ç¨‹ä¿¡å·é‡ğŸ”")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<semaphore.h>")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éœ€è¦includeè¿™ä¸ª")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" pshared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_destroy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_wait")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_getvalue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("valp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"â­ï¸2-3-ä¿¡å·-signal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸2-3-ä¿¡å·-signal"}},[s._v("#")]),s._v(" â­ï¸2.3.ä¿¡å·ï¼ˆSignalï¼‰")]),s._v(" "),t("blockquote",[t("p",[s._v("(å¼€é”€æœ€å°)")])]),s._v(" "),t("ul",[t("li",[s._v("ã€ŠUnixç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹ä¸­ç¬¬10ç« ")])]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<signal.h>")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éœ€è¦includeè¿™ä¸ª")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typedef")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sighandler_t")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sighandler_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("signal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" signum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sighandler_t")]),s._v(" handler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h4",{attrs:{id:"â­ï¸2-4-æ¶ˆæ¯é˜Ÿåˆ—-message-queue-mq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸2-4-æ¶ˆæ¯é˜Ÿåˆ—-message-queue-mq"}},[s._v("#")]),s._v(" â­ï¸2.4.æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼ŒMQï¼‰")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<sys/msg.h>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("# æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³å‡½æ•°åŠæ•°æ®ç»“æ„å¤´æ–‡ä»¶")])]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("msgctl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" msqid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" cmd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("msqid_ds")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("buf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("# æ§åˆ¶æ¶ˆæ¯é˜Ÿåˆ—å‡½æ•°\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("msgget")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("key_t")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" msgflg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" # åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œkeyå€¼å”¯ä¸€æ ‡è¯†è¯¥æ¶ˆæ¯é˜Ÿåˆ—\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("msgrcv")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" msqid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("msg_ptr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("size_t")]),s._v(" msg_sz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" msgtype"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" msgflg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("# æ¥æ”¶æ¶ˆæ¯\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("msgsnd")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" msqid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("msg_ptr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("size_t")]),s._v(" msg_sz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" msgflg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("# å‘é€æ¶ˆæ¯\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"â­ï¸2-5-å…±äº«å†…å­˜-shared-memory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸2-5-å…±äº«å†…å­˜-shared-memory"}},[s._v("#")]),s._v(" â­ï¸2.5.å…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ç›¸å¯¹ç®¡é“ï¼Œå¯ä»¥åœ¨"),t("strong",[s._v("æ²¡æœ‰è¡€ç¼˜å…³ç³»")]),s._v("çš„è¿›ç¨‹ä¹‹é—´ï¼Œå®Œæˆæ•°æ®ä¼ é€’ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("å…±äº«å†…å­˜æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š1ã€å†…å­˜æ˜ å°„ 2ã€å…±äº«å†…å­˜æœºåˆ¶")])])]),s._v(" "),t("blockquote",[t("p",[s._v("1ã€å†…å­˜æ˜ å°„")])]),s._v(" "),t("ul",[t("li",[s._v("å†…å­˜æ˜ å°„"),t("code",[s._v("memory map")]),s._v("æœºåˆ¶ä½¿è¿›ç¨‹ä¹‹é—´é€šè¿‡æ˜ å°„åŒä¸€ä¸ªæ™®é€šæ–‡ä»¶å®ç°å…±äº«å†…å­˜ï¼Œé€šè¿‡"),t("code",[s._v("mmap()")]),s._v("ç³»ç»Ÿè°ƒç”¨å®ç°ã€‚")]),s._v(" "),t("li",[s._v("æ™®é€šæ–‡ä»¶è¢«æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´åï¼Œè¿›ç¨‹å¯ä»¥åƒè®¿é—®æ™®é€šå†…å­˜ä¸€æ ·å¯¹æ–‡ä»¶è¿›è¡Œè®¿é—®ï¼Œä¸å¿…å†è°ƒç”¨read/writeç­‰æ–‡ä»¶æ“ä½œå‡½æ•°ã€‚")])]),s._v(" "),t("blockquote",[t("p",[s._v("2ã€UNIX System Vå…±äº«å†…å­˜æœºåˆ¶")])]),s._v(" "),t("ul",[t("li",[s._v("IPCçš„å…±äº«å†…å­˜æŒ‡çš„æ˜¯æŠŠæ‰€æœ‰çš„å…±äº«æ•°æ®æ”¾åœ¨å…±äº«å†…å­˜åŒºåŸŸï¼ˆIPC shared memory regionï¼‰ï¼Œä»»ä½•æƒ³è¦è®¿é—®è¯¥æ•°æ®çš„è¿›ç¨‹éƒ½å¿…é¡»åœ¨æœ¬è¿›ç¨‹çš„åœ°å€ç©ºé—´æ–°å¢ä¸€å—å†…å­˜åŒºåŸŸï¼Œç”¨æ¥æ˜ å°„å­˜æ”¾å…±äº«æ•°æ®çš„ç‰©ç†å†…å­˜é¡µé¢ã€‚")]),s._v(" "),t("li",[s._v("å’Œå‰é¢çš„mmapç³»ç»Ÿè°ƒç”¨é€šè¿‡æ˜ å°„ä¸€ä¸ªæ™®é€šæ–‡ä»¶å®ç°å…±äº«å†…å­˜ä¸åŒï¼Œ"),t("code",[s._v("UNIX system V")]),s._v("å…±äº«å†…å­˜æ˜¯é€šè¿‡æ˜ å°„ç‰¹æ®Šæ–‡ä»¶ç³»ç»Ÿshmä¸­çš„æ–‡ä»¶å®ç°è¿›ç¨‹é—´çš„å…±äº«å†…å­˜é€šä¿¡ã€‚")])]),s._v(" "),t("blockquote",[t("p",[s._v("å‚è€ƒèµ„æ–™ï¼š"),t("a",{attrs:{href:"https://www.cnblogs.com/LUO77/p/5816326.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼â€”â€”ä¿¡å·ã€ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜"),t("OutboundLink")],1)])]),s._v(" "),t("h4",{attrs:{id:"â­ï¸2-6-å¥—æ¥å­—-socket"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸2-6-å¥—æ¥å­—-socket"}},[s._v("#")]),s._v(" â­ï¸2.6.å¥—æ¥å­—ï¼ˆSocketï¼‰")]),s._v(" "),t("ul",[t("li",[s._v("æœ¬åœ°å¥—æ¥å­—ï¼Œç›¸è¾ƒäºå‰3ç§ï¼Œéš¾åº¦æœ€å¤§ï¼Œä½†æ˜¯ç¨³å®šæ€§æœ€å¥½")])]),s._v(" "),t("h4",{attrs:{id:"â­ï¸2-7-æ¯”å¦‚cè¯­è¨€ä¸­-æ–°å»ºæ–‡ä»¶ã€å·²ç»è¢«å¼ƒç”¨ã€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸2-7-æ¯”å¦‚cè¯­è¨€ä¸­-æ–°å»ºæ–‡ä»¶ã€å·²ç»è¢«å¼ƒç”¨ã€"}},[s._v("#")]),s._v(" â­ï¸2.7.æ¯”å¦‚Cè¯­è¨€ä¸­ï¼Œæ–°å»ºæ–‡ä»¶ã€å·²ç»è¢«å¼ƒç”¨ã€")]),s._v(" "),t("h2",{attrs:{id:"_3-çº¿ç¨‹åŒæ­¥æŠ€æœ¯ã€4å¤§å¤©ç‹ã€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-çº¿ç¨‹åŒæ­¥æŠ€æœ¯ã€4å¤§å¤©ç‹ã€"}},[s._v("#")]),s._v(" 3.çº¿ç¨‹åŒæ­¥æŠ€æœ¯ã€4å¤§å¤©ç‹ã€")]),s._v(" "),t("img",{attrs:{src:a(279)}}),s._v(" "),t("p",[s._v("inuxä¸‹çš„çº¿ç¨‹åˆ›å»ºã€ç­‰å¾…ã€è·å–çº¿ç¨‹ id")]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pthread_attr_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("attr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("start_routine"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("arg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_t thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("retval"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\npthread_t "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_self")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("ä¿è¯1ç‚¹ï¼šçº¿ç¨‹åŒæ­¥")]),s._v(" "),t("li",[s._v("Tipsï¼šçº¿ç¨‹ç”±äºï¼Œå·²ç»å…±äº«å†…å­˜ç©ºé—´äº†ï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰å¿…è¦ã€æ•°æ®äº¤æ¢ã€ï¼Œä¹Ÿå°±ä¸éœ€è¦ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_1-é”æœºåˆ¶-åŒ…æ‹¬ä¸‹é¢4ç§-lock"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-é”æœºåˆ¶-åŒ…æ‹¬ä¸‹é¢4ç§-lock"}},[s._v("#")]),s._v(" ğŸ”1.é”æœºåˆ¶ï¼ˆåŒ…æ‹¬ä¸‹é¢4ç§ï¼‰Lock")]),s._v(" "),t("ul",[t("li",[s._v("ğŸ”äº’æ–¥é‡/é”ï¼ˆmutexï¼‰/äº’æ–¥ä½“")]),s._v(" "),t("li",[s._v("äº’æ–¥é”æ˜¯ä¸ºå®ç°ä¿æŠ¤å…±äº«èµ„æºè€Œæå‡ºä¸€ç§é”æœºåˆ¶ã€‚é‡‡ç”¨äº’æ–¥é”ä¿æŠ¤ä¸´ç•ŒåŒºï¼Œé˜²æ­¢ç«äº‰æ¡ä»¶å‡ºç°ã€‚å½“æŸä¸ªçº¿ç¨‹æ— æ³•è·å–äº’æ–¥é”æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œå½“å…¶ä»–çº¿ç¨‹é‡Šæ”¾äº’æ–¥é”åï¼Œæ“ä½œç³»ç»Ÿä¼šå”¤é†’è¢«æŒ‚èµ·åœ¨è¿™ä¸ªé”ä¸Šçš„çº¿ç¨‹ï¼Œè®©å…¶è¿è¡Œã€‚")]),s._v(" "),t("li",[s._v("åœºæ™¯ï¼š\n"),t("ul",[t("li",[s._v("1ã€è§£å†³ã€çº¿ç¨‹å®‰å…¨ã€é—®é¢˜ï¼Œä¸€æ¬¡åªèƒ½ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¢«ä¿æŠ¤çš„èµ„æºã€‚")]),s._v(" "),t("li",[s._v("2ã€è¢«ä¿æŠ¤èµ„æºéœ€è¦ã€ç¡çœ ã€ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨äº’æ–¥é”")])])]),s._v(" "),t("li",[s._v("äº’æ–¥é”çš„ä¼˜åŒ–")])]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-txt"}},[t("code",[s._v("- åœ¨Linuxä¸‹äº’æ–¥é”çš„å®ç°æ˜¯é€šè¿‡ã€futexã€è¿™ä¸ªåŸºç¡€ç»„ä»¶ã€‚\n- äº’æ–¥é”åŠ é”è§£é”å¼€é”€å¾ˆå¤§ï¼Œéœ€è¦ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢ä»¥åŠæ¶‰åŠç¼“å­˜çš„æ›´æ–°ç­‰ç­‰ã€‚\né€šå¸¸å¾ˆå¤šåŒæ­¥æ“ä½œå‘ç”Ÿçš„æ—¶å€™å¹¶æ²¡æœ‰ç«äº‰çš„äº§ç”Ÿï¼Œæ­¤æ—¶ä¸Šè¿°å¼€é”€å°±æ²¡æœ‰å¿…è¦ã€‚\nè€ƒè™‘åˆ°è¿™ä¸ªå› ç´ ï¼Œfutexé€šè¿‡ç”¨æˆ·ç©ºé—´çš„å…±äº«å†…å­˜ä»¥åŠåŸå­æ“ä½œï¼Œåœ¨å…±äº«çš„èµ„æºä¸å­˜åœ¨ç«äº‰çš„æ—¶å€™ï¼Œä¸ä¼šè¿›è¡Œç³»ç»Ÿè°ƒç”¨è€Œæ˜¯åªæœ‰å½“ç«äº‰å‡ºç°çš„æƒ…å†µä¸‹å†è¿›è¡Œç³»ç»Ÿè°ƒç”¨é™·å…¥å†…æ ¸ã€‚\nè¿›ç¨‹æˆ–è€…çº¿ç¨‹åœ¨æ²¡æœ‰ç«äº‰çš„æƒ…å†µä¸‹å¯ä»¥ç«‹åˆ»è·å–é”ã€‚\nå…·ä½“æ¥è¯´ï¼Œfutexçš„ä¼˜åŒ–æ–¹å¼å¦‚ä¸‹ï¼š\nfutexå°†åŒæ­¥è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ç”±å†…æ ¸å®Œæˆï¼Œä¸€éƒ¨åˆ†ç”±ç”¨æˆ·æ€å®Œæˆï¼›å¦‚æœåŒæ­¥æ—¶æ²¡æœ‰ç«äº‰å‘ç”Ÿï¼Œé‚£ä¹ˆå®Œå…¨åœ¨ç”¨æˆ·æ€å¤„ç†ï¼›å¦åˆ™ï¼Œè¿›å…¥å†…æ ¸æ€è¿›è¡Œå¤„ç†ã€‚\nã€å‡å°‘ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ï¼Œæ¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½æ˜¯ä¸€ç§åˆç†çš„ä¼˜åŒ–æ–¹å¼ã€‚ã€\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<pthread.h>")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éœ€è¦includeçš„")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_mutex_init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_mutex_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("mutex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pthread_mutexattr_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("mutexattr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_mutex_destroy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_mutex_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("mutex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_mutex_lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_mutex_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("mutex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_mutex_trylock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_mutex_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("mutex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_mutex_unlock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_mutex_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("mutex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("ğŸ”è¯»å†™é”ï¼ˆreader-writer lockï¼‰")])]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<pthread.h>")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éœ€è¦includeçš„")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlockattr_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict attr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_destroy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_rdlock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_tryrdlock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_wrlock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_trywrlock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_unlock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ä¸‹é¢æ˜¯è¿‡æ—¶çš„â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è¿™ä¸¤ä¸ªå‡½æ•°åœ¨Linuxå’ŒMacçš„manæ–‡æ¡£é‡Œéƒ½æ²¡æœ‰ï¼Œæ–°ç‰ˆçš„pthread.hé‡Œé¢ä¹Ÿæ²¡æœ‰ï¼Œæ—§ç‰ˆçš„èƒ½æ‰¾åˆ°")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_timedrdlock_np")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("timespec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("deltatime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_rwlock_timedwrlock_np")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("pthread_rwlock_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("rwlock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("timespec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("deltatime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("ul",[t("li",[s._v("ğŸ”è‡ªæ—‹é”ï¼ˆspin lockï¼‰")]),s._v(" "),t("li",[s._v("è‡ªæ—‹é”ä¹Ÿæ˜¯ä¸ºå®ç°ä¿æŠ¤å…±äº«èµ„æºè€Œæå‡ºä¸€ç§é”æœºåˆ¶ã€‚")]),s._v(" "),t("li",[s._v("è‡ªæ—‹é”ä¸ä¼šå¼•èµ·è°ƒç”¨çº¿ç¨‹é˜»å¡ï¼Œå¦‚æœè‡ªæ—‹é”å·²ç»è¢«åˆ«çš„çº¿ç¨‹æŒæœ‰ï¼Œè°ƒç”¨çº¿ç¨‹å°±ä¸€ç›´å¾ªç¯æ£€æµ‹æ˜¯å¦è¯¥è‡ªæ—‹é”å·²ç»è¢«é‡Šæ”¾ã€‚")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_spin_init")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__pthread_spinlock_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("__lock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" __pshared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_spin_destroy")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__pthread_spinlock_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("__lock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_spin_lock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__pthread_spinlock_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("__lock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_spin_trylock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__pthread_spinlock_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("__lock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_spin_unlock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__pthread_spinlock_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("__lock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("â­ï¸"),t("strong",[s._v("æ¡ä»¶å˜é‡")]),s._v("ï¼ˆconditionï¼‰")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<pthread.h>")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éœ€è¦includeçš„")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_cond_init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_cond_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict cond"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pthread_condattr_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict attr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_cond_destroy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_cond_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("cond"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_cond_wait")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_cond_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict cond"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pthread_mutex_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict mutex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_cond_timedwait")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_cond_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict cond"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pthread_mutex_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict mutex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("timespec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("restrict abstime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_cond_signal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_cond_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("cond"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pthread_cond_broadcast")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_cond_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("cond"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"â­ï¸2-ä¿¡å·é‡æœºåˆ¶-semaphore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸2-ä¿¡å·é‡æœºåˆ¶-semaphore"}},[s._v("#")]),s._v(" â­ï¸2.ä¿¡å·é‡æœºåˆ¶ï¼ˆSemaphoreï¼‰")]),s._v(" "),t("ul",[t("li",[s._v("æ— åçº¿ç¨‹ä¿¡å·é‡")]),s._v(" "),t("li",[s._v("å‘½åçº¿ç¨‹ä¿¡å·é‡")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<semaphore.h>")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éœ€è¦includeè¿™ä¸ª")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" pshared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_destroy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_wait")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ï¼ˆç›¸å½“äºåŠ é”ï¼Œè¡¨ç¤º--ï¼‰")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ï¼ˆç›¸å½“äºè§£é”ï¼Œè¡¨ç¤º++ï¼‰")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sem_getvalue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sem_t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("valp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nsem_trywaitå‡½æ•°\nsem_timedwaitå‡½æ•°\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"â­ï¸3-ä¿¡å·æœºåˆ¶-signal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸3-ä¿¡å·æœºåˆ¶-signal"}},[s._v("#")]),s._v(" â­ï¸3.ä¿¡å·æœºåˆ¶ï¼ˆSignalï¼‰")]),s._v(" "),t("ul",[t("li",[s._v("ã€ŠUnixç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹ä¸­ç¬¬10ç« ")])]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<signal.h>")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éœ€è¦includeè¿™ä¸ª")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typedef")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sighandler_t")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sighandler_t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("signal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" signum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sighandler_t")]),s._v(" handler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"â­ï¸4-å±éšœ-barrier"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#â­ï¸4-å±éšœ-barrier"}},[s._v("#")]),s._v(" â­ï¸4.å±éšœï¼ˆbarrierï¼‰")]),s._v(" "),t("blockquote",[t("p",[s._v("å‚è€ƒï¼š"),t("a",{attrs:{href:"https://blog.nowcoder.net/n/e26967a0bfa44ffb9836c0713412d4a7",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux C/C++ åå°å¼€å‘å®ä¹ ç”ŸæŠ€èƒ½è¦æ±‚"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"_4-ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»-ç¼–ç é“¾æ¥å’Œåº“åˆ†ç±»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»-ç¼–ç é“¾æ¥å’Œåº“åˆ†ç±»"}},[s._v("#")]),s._v(" 4.ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ï¼Œç¼–ç é“¾æ¥å’Œåº“åˆ†ç±»")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ä¸‹é¢çš„è¯´æ³•æ¥è‡ªã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ï¼Œç¼–ç é“¾æ¥å’Œåº“ã€‹ï¼Œæ„Ÿè§‰åˆ†ç±»ä¸æ­£ç¡®")])]),s._v(" "),t("li",[t("p",[s._v("åŒæ­¥çš„å„ç§é”ï¼š")])])]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-txt"}},[t("code",[s._v('ï¼ˆ1ï¼‰ä¿¡å·é‡\nï¼ˆä¸¥æ ¼ç¨‹åº¦ï¼šä½ï¼‰äºŒå…ƒä¿¡å·é‡ï¼ˆBinary Semaphoreï¼‰æ˜¯æœ€ç®€å•çš„ä¸€ç§é”ï¼Œå®ƒåªæœ‰ä¸¤ç§çŠ¶æ€:å ç”¨ä¸éå ç”¨ã€‚\nå®ƒé€‚åˆåªèƒ½è¢«å”¯ä¸€ä¸ªçº¿ç¨‹ç‹¬å è®¿é—®çš„èµ„æºã€‚å½“äºŒå…ƒä¿¡å·é‡å¤„äºéå ç”¨çŠ¶æ€æ—¶ï¼Œç¬¬ä¸€ä¸ªè¯•å›¾è·å–è¯¥äºŒå…ƒä¿¡å·é‡çš„çº¿ç¨‹ä¼šè·å¾—è¯¥é”ï¼Œå¹¶å°†äºŒå…ƒä¿¡å·é‡ç½®ä¸ºå ç”¨çŠ¶æ€ï¼Œæ­¤åå…¶ä»–çš„æ‰€æœ‰è¯•å›¾è·å–è¯¥äºŒå…ƒä¿¡å·é‡çš„çº¿ç¨‹å°†ä¼šç­‰å¾…ï¼Œç›´åˆ°è¯¥é”è¢«é‡Šæ”¾ã€‚\n- å¯¹äºå…è®¸å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®çš„èµ„æºï¼Œ<b>å¤šå…ƒä¿¡å·é‡ç®€ç§°ä¿¡å·é‡(Semaphore)</b>,å®ƒæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ä¸€ä¸ªåˆå§‹å€¼ä¸ºNçš„ä¿¡å·é‡å…è®¸Nä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®ã€‚çº¿ç¨‹è®¿é—®èµ„æºçš„æ—¶å€™é¦–å…ˆè·å–ä¿¡å·é‡ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œ:\n- å°†ä¿¡å·é‡çš„å€¼å‡1ã€‚\n- å¦‚æœä¿¡å·é‡çš„å€¼å°äº0ï¼Œåˆ™è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¦åˆ™ç»§ç»­æ‰§è¡Œã€‚\n- è®¿é—®å®Œèµ„æºä¹‹åï¼Œçº¿ç¨‹é‡Šæ”¾ä¿¡å·é‡ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œ:\n- å°†ä¿¡å·é‡çš„å€¼åŠ 1ã€‚\n- å¦‚æœä¿¡å·é‡çš„å€¼å°äº1,å”¤é†’-ä¸€ä¸ªç­‰å¾…ä¸­çš„çº¿ç¨‹ã€‚\n\n\nï¼ˆä¸¥æ ¼ç¨‹åº¦ï¼šä¸­ï¼‰äº’æ–¥é‡ï¼ˆMutexï¼‰å’ŒäºŒå…ƒä¿¡å·é‡å¾ˆç±»ä¼¼ï¼Œèµ„æºä»…åŒæ—¶å…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œä½†å’Œä¿¡å·é‡ä¸åŒçš„æ˜¯:\n1ï¼‰ä¿¡å·é‡åœ¨æ•´ä¸ªç³»ç»Ÿå¯ä»¥è¢«ä»»æ„çº¿ç¨‹è·å–å¹¶é‡Šæ”¾ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªä¿¡å·é‡å¯ä»¥è¢«ç³»ç»Ÿä¸­çš„ä¸€ä¸ªçº¿ç¨‹è·å–ä¹‹åçš„<font style="background: yellow">å¦ä¸€ä¸ªçº¿ç¨‹</font>é‡Šæ”¾ã€‚\n2ï¼‰äº’æ–¥é‡åˆ™è¦æ±‚å“ªä¸ªçº¿ç¨‹è·å–äº†äº’æ–¥é‡ï¼Œå“ªä¸ªçº¿ç¨‹å°±è¦è´Ÿè´£é‡Šæ”¾è¿™ä¸ªé”ï¼Œå…¶ä»–çº¿ç¨‹è¶Šä¿ä»£åº–å»é‡Šæ”¾äº’æ–¥é‡æ˜¯æ— æ•ˆçš„ã€‚\n\n\n\nï¼ˆä¸¥æ ¼ç¨‹åº¦ï¼šé«˜ï¼‰ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰æ˜¯æ¯”äº’æ–¥é‡æ›´åŠ ä¸¥æ ¼çš„åŒæ­¥æ‰‹æ®µã€‚\nåœ¨æœ¯è¯­ä¸­ï¼ŒæŠŠä¸´ç•ŒåŒºçš„é”çš„è·å–ç§°ä¸ºè¿›å…¥ä¸´ç•ŒåŒº,è€ŒæŠŠé”çš„ç¨‹æ”¾ç§°ä¸ºç¦»å¼€ä¸´ç•ŒåŒºã€‚\nä¸´ç•ŒåŒºå’Œäº’æ–¥é‡ä¸ä¿¡å·é‡çš„åŒºåˆ«åœ¨äº:\n1ï¼‰<b>äº’æ–¥é‡å’Œä¿¡å·é‡</b>åœ¨ç³»ç»Ÿçš„<font style="background: yellow"><b>ä»»ä½•è¿›ç¨‹</b></font>é‡Œéƒ½æ˜¯å¯è§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªè¿›ç¨‹åˆ›å»ºäº†ä¸€ä¸ªäº’æ–¥é‡æˆ–ä¿¡å·é‡,å¦ä¸€ä¸ªè¿›ç¨‹è¯•å›¾å»è·å–è¯¥é”æ˜¯åˆæ³•çš„ã€‚\n2ï¼‰<b>ä¸´ç•ŒåŒº</b>çš„ä½œç”¨èŒƒå›´<font style="background: yellow"><b>ä»…é™äºæœ¬è¿›ç¨‹</b></font>ï¼Œå…¶ä»–çš„è¿›ç¨‹æ— æ³•è·å–è¯¥é”ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸´ç•ŒåŒºå…·æœ‰å’Œäº’æ–¥é‡ç›¸åŒçš„æ€§è´¨ã€‚\n\n\n\n\nï¼ˆ2ï¼‰è¯»å†™é”ï¼ˆRead-Write Lockï¼‰\n- ç”±æ¥ï¼šå¯¹äºä¸€æ®µæ•°æ®ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å–æ€»æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†å‡è®¾æ“ä½œéƒ½ä¸æ˜¯åŸå­å‹ï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªçº¿ç¨‹è¯•å›¾å¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå°±å¿…é¡»ä½¿ç”¨åŒæ­¥æ‰‹æ®µæ¥é¿å…å‡ºé”™ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸Šè¿°ä¿¡å·é‡ã€äº’æ–¥é‡æˆ–ä¸´ç•ŒåŒºä¸­çš„ä»»ä½•ä¸€ç§æ¥è¿›è¡ŒåŒæ­¥ï¼Œå°½ç®¡å¯ä»¥ä¿è¯ç¨‹åºæ­£ç¡®ï¼Œä½†<b>å¯¹äºè¯»å–é¢‘ç¹ï¼Œè€Œä»…ä»…å¶å°”å†™å…¥çš„æƒ…å†µ</b>ï¼Œä¼šæ˜¾å¾—éå¸¸ä½æ•ˆã€‚\n- è¯»å†™é”(Read-Write Lock)è‡´åŠ›äºä¸€ç§æ›´åŠ ç‰¹å®šçš„åœºåˆçš„åŒæ­¥:<b>è¯»å–é¢‘ç¹ï¼Œå¶å°”å†™å…¥çš„æƒ…å†µ</b>\n- è¯»å†™é”å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚å¯¹äºåŒä¸€ä¸ªé”ï¼Œè¯»å†™é”æœ‰ä¸¤ç§è·å–æ–¹å¼ï¼Œ<b>å…±äº«çš„(Shared)</b>æˆ–<b>ç‹¬å (Exclusive)</b>ã€‚\n- å½“é”å¤„äºè‡ªç”±çš„çŠ¶æ€æ—¶ï¼Œè¯•å›¾ä»¥ä»»ä½•ä¸€ç§æ–¹å¼è·å–é”éƒ½èƒ½æˆåŠŸï¼Œå¹¶å°†é”ç½®äºå¯¹åº”çš„çŠ¶æ€ã€‚\n- å¦‚æœé”å¤„äºå…±äº«çŠ¶æ€ï¼Œå…¶ä»–çº¿ç¨‹ä»¥å…±äº«çš„æ–¹å¼è·å–é”ä»ç„¶ä¼šæˆåŠŸï¼Œæ­¤æ—¶è¿™ä¸ªé”åˆ†é…ç»™äº†å¤šä¸ªçº¿ç¨‹ã€‚ç„¶è€Œï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹è¯•å›¾ä»¥ç‹¬èº«çš„æ–¹å¼è·å–å·²ç»å¤„äºå…±äº«çŠ¶æ€çš„é”ï¼Œé‚£ä¹ˆå®ƒå°†å¿…é¡»ç­‰å¾…é”è¢«æ‰€æœ‰çš„çº¿ç¨‹é‡Šæ”¾ã€‚\n- ç›¸åº”åœ°ï¼Œå¤„äºç‹¬å çŠ¶æ€çš„é”å°†é˜»æ­¢ä»»ä½•å…¶ä»–çº¿ç¨‹è·å–è¯¥é”ï¼Œä¸è®ºå®ƒä»¬è¯•å›¾ä»¥å“ªç§æ–¹å¼è·å–ã€‚\n\n\nï¼ˆ3ï¼‰æ¡ä»¶å˜é‡ï¼ˆCondition Variableï¼‰ ä½œä¸ºä¸€ç§åŒæ­¥æ‰‹æ®µï¼Œä½œç”¨ç±»ä¼¼äºä¸€ä¸ªæ …æ ã€‚\n- å¯¹äºæ¡ä»¶å˜é‡ï¼Œçº¿ç¨‹å¯ä»¥æœ‰ä¸¤ç§æ“ä½œï¼Œé¦–å…ˆçº¿ç¨‹å¯ä»¥ç­‰å¾…æ¡ä»¶å˜é‡ï¼Œä¸€ä¸ªæ¡ä»¶å˜é‡å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹ç­‰å¾…ã€‚\n- å…¶æ¬¡ï¼Œçº¿ç¨‹å¯ä»¥å”¤é†’æ¡ä»¶å˜é‡,æ­¤æ—¶æŸä¸ªæˆ–æ‰€æœ‰ç­‰å¾…æ­¤æ¡ä»¶å˜é‡çš„çº¿ç¨‹éƒ½ä¼šè¢«å”¤é†’å¹¶ç»§ç»­æ”¯æŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨æ¡ä»¶å˜é‡å¯ä»¥è®©è®¸å¤šçº¿ç¨‹-èµ·ç­‰å¾…æŸä¸ªäº‹ä»¶çš„å‘ç”Ÿï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶(æ¡ä»¶å˜é‡è¢«å”¤é†’)ï¼Œæ‰€æœ‰çš„çº¿ç¨‹å¯ä»¥ä¸€èµ·æ¢å¤æ‰§è¡Œã€‚\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);