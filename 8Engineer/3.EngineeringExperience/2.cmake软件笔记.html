<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CMakeå¿«é€Ÿä½¿ç”¨ç¬”è®° | whoway</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/photo.jpg">
    <link rel="manifest" href="/images/photo.jpg">
    <link rel="apple-touch-icon" href="/images/photo.jpg">
    <meta name="description" content="Personal Blog Website">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.a88dafb3.css" as="style"><link rel="preload" href="/assets/js/app.4d62c346.js" as="script"><link rel="preload" href="/assets/js/2.1f2e249d.js" as="script"><link rel="preload" href="/assets/js/1.4450334d.js" as="script"><link rel="preload" href="/assets/js/211.ad15a396.js" as="script"><link rel="prefetch" href="/assets/js/10.4125d26f.js"><link rel="prefetch" href="/assets/js/100.a8403b5f.js"><link rel="prefetch" href="/assets/js/101.965e6b8c.js"><link rel="prefetch" href="/assets/js/102.47d5c58f.js"><link rel="prefetch" href="/assets/js/103.973789d3.js"><link rel="prefetch" href="/assets/js/104.d5c2a709.js"><link rel="prefetch" href="/assets/js/105.6a73ae27.js"><link rel="prefetch" href="/assets/js/106.f6ecd468.js"><link rel="prefetch" href="/assets/js/107.87aafb77.js"><link rel="prefetch" href="/assets/js/108.eeb8d328.js"><link rel="prefetch" href="/assets/js/109.3656feff.js"><link rel="prefetch" href="/assets/js/11.72ae73cf.js"><link rel="prefetch" href="/assets/js/110.4b7e7bff.js"><link rel="prefetch" href="/assets/js/111.cb8174ed.js"><link rel="prefetch" href="/assets/js/112.7f56e8ac.js"><link rel="prefetch" href="/assets/js/113.47ff69ee.js"><link rel="prefetch" href="/assets/js/114.4cd8a8b4.js"><link rel="prefetch" href="/assets/js/115.82ec13bf.js"><link rel="prefetch" href="/assets/js/116.f7323811.js"><link rel="prefetch" href="/assets/js/117.32056e3a.js"><link rel="prefetch" href="/assets/js/118.84d9bd5e.js"><link rel="prefetch" href="/assets/js/119.7e402bd2.js"><link rel="prefetch" href="/assets/js/12.e97e2b38.js"><link rel="prefetch" href="/assets/js/120.19d3a6d1.js"><link rel="prefetch" href="/assets/js/121.6664ac2e.js"><link rel="prefetch" href="/assets/js/122.49fd5b7c.js"><link rel="prefetch" href="/assets/js/123.d5628776.js"><link rel="prefetch" href="/assets/js/124.afc4ac36.js"><link rel="prefetch" href="/assets/js/125.88c60b68.js"><link rel="prefetch" href="/assets/js/126.d731c73f.js"><link rel="prefetch" href="/assets/js/127.b248b8c8.js"><link rel="prefetch" href="/assets/js/128.dd5b68c0.js"><link rel="prefetch" href="/assets/js/129.a2a85a64.js"><link rel="prefetch" href="/assets/js/13.94d5a800.js"><link rel="prefetch" href="/assets/js/130.7c7c869d.js"><link rel="prefetch" href="/assets/js/131.f37d9f77.js"><link rel="prefetch" href="/assets/js/132.000259e5.js"><link rel="prefetch" href="/assets/js/133.0b97a8a9.js"><link rel="prefetch" href="/assets/js/134.d49770be.js"><link rel="prefetch" href="/assets/js/135.ce6974a3.js"><link rel="prefetch" href="/assets/js/136.df33e08f.js"><link rel="prefetch" href="/assets/js/137.866aaa32.js"><link rel="prefetch" href="/assets/js/138.a62a98d7.js"><link rel="prefetch" href="/assets/js/139.045dadb7.js"><link rel="prefetch" href="/assets/js/14.db05e204.js"><link rel="prefetch" href="/assets/js/140.e5df61d7.js"><link rel="prefetch" href="/assets/js/141.103dd506.js"><link rel="prefetch" href="/assets/js/142.880fafce.js"><link rel="prefetch" href="/assets/js/143.565ea810.js"><link rel="prefetch" href="/assets/js/144.5565e20b.js"><link rel="prefetch" href="/assets/js/145.fd6bbd73.js"><link rel="prefetch" href="/assets/js/146.77194793.js"><link rel="prefetch" href="/assets/js/147.9658c4f3.js"><link rel="prefetch" href="/assets/js/148.2d1d0cbe.js"><link rel="prefetch" href="/assets/js/149.7cb24d9d.js"><link rel="prefetch" href="/assets/js/15.df39777f.js"><link rel="prefetch" href="/assets/js/150.d668b3cb.js"><link rel="prefetch" href="/assets/js/151.57e7ba26.js"><link rel="prefetch" href="/assets/js/152.7e935237.js"><link rel="prefetch" href="/assets/js/153.4120c86d.js"><link rel="prefetch" href="/assets/js/154.1297ade5.js"><link rel="prefetch" href="/assets/js/155.0e7f021a.js"><link rel="prefetch" href="/assets/js/156.e5b20618.js"><link rel="prefetch" href="/assets/js/157.395b5ab7.js"><link rel="prefetch" href="/assets/js/158.ade8f24f.js"><link rel="prefetch" href="/assets/js/159.5328b970.js"><link rel="prefetch" href="/assets/js/16.3e7c2e4a.js"><link rel="prefetch" href="/assets/js/160.82f8b95c.js"><link rel="prefetch" href="/assets/js/161.465aa22f.js"><link rel="prefetch" href="/assets/js/162.a8f6f30c.js"><link rel="prefetch" href="/assets/js/163.ab60cf3a.js"><link rel="prefetch" href="/assets/js/164.eb31cfb8.js"><link rel="prefetch" href="/assets/js/165.c84c6e0a.js"><link rel="prefetch" href="/assets/js/166.9b21d15f.js"><link rel="prefetch" href="/assets/js/167.934993e9.js"><link rel="prefetch" href="/assets/js/168.2c3580b9.js"><link rel="prefetch" href="/assets/js/169.97bfa91b.js"><link rel="prefetch" href="/assets/js/17.13f9f737.js"><link rel="prefetch" href="/assets/js/170.351b3f9f.js"><link rel="prefetch" href="/assets/js/171.4e3ab47b.js"><link rel="prefetch" href="/assets/js/172.06eddd1b.js"><link rel="prefetch" href="/assets/js/173.5c45d3af.js"><link rel="prefetch" href="/assets/js/174.3f715128.js"><link rel="prefetch" href="/assets/js/175.6760b955.js"><link rel="prefetch" href="/assets/js/176.70bc79cb.js"><link rel="prefetch" href="/assets/js/177.88c54535.js"><link rel="prefetch" href="/assets/js/178.f1fc7384.js"><link rel="prefetch" href="/assets/js/179.a7c12ac5.js"><link rel="prefetch" href="/assets/js/18.dd74791a.js"><link rel="prefetch" href="/assets/js/180.fc13ec55.js"><link rel="prefetch" href="/assets/js/181.3013777b.js"><link rel="prefetch" href="/assets/js/182.f3a05986.js"><link rel="prefetch" href="/assets/js/183.3b41d6ca.js"><link rel="prefetch" href="/assets/js/184.7bb713bd.js"><link rel="prefetch" href="/assets/js/185.16e09345.js"><link rel="prefetch" href="/assets/js/186.741931a7.js"><link rel="prefetch" href="/assets/js/187.1f3f0592.js"><link rel="prefetch" href="/assets/js/188.ace12445.js"><link rel="prefetch" href="/assets/js/189.76dac0b3.js"><link rel="prefetch" href="/assets/js/19.2299b1be.js"><link rel="prefetch" href="/assets/js/190.2fe258ad.js"><link rel="prefetch" href="/assets/js/191.aa831315.js"><link rel="prefetch" href="/assets/js/192.6dcc9870.js"><link rel="prefetch" href="/assets/js/193.c2831a08.js"><link rel="prefetch" href="/assets/js/194.fdb23ecf.js"><link rel="prefetch" href="/assets/js/195.79123ef6.js"><link rel="prefetch" href="/assets/js/196.d69a9792.js"><link rel="prefetch" href="/assets/js/197.0dd64b3b.js"><link rel="prefetch" href="/assets/js/198.7b279e38.js"><link rel="prefetch" href="/assets/js/199.049c91c0.js"><link rel="prefetch" href="/assets/js/20.d1957611.js"><link rel="prefetch" href="/assets/js/200.70439425.js"><link rel="prefetch" href="/assets/js/201.0fa31c8f.js"><link rel="prefetch" href="/assets/js/202.c573d5e8.js"><link rel="prefetch" href="/assets/js/203.0bb6f2d8.js"><link rel="prefetch" href="/assets/js/204.0335c8bb.js"><link rel="prefetch" href="/assets/js/205.aeea141e.js"><link rel="prefetch" href="/assets/js/206.e70b8bc7.js"><link rel="prefetch" href="/assets/js/207.84db4848.js"><link rel="prefetch" href="/assets/js/208.a25c0c71.js"><link rel="prefetch" href="/assets/js/209.46dd9298.js"><link rel="prefetch" href="/assets/js/21.3aeaccd0.js"><link rel="prefetch" href="/assets/js/210.11b96686.js"><link rel="prefetch" href="/assets/js/212.383c7ffb.js"><link rel="prefetch" href="/assets/js/213.f272fc8e.js"><link rel="prefetch" href="/assets/js/214.e7a0db4a.js"><link rel="prefetch" href="/assets/js/215.f7d72ed1.js"><link rel="prefetch" href="/assets/js/216.6da4ff7a.js"><link rel="prefetch" href="/assets/js/217.244dd25b.js"><link rel="prefetch" href="/assets/js/218.37684be9.js"><link rel="prefetch" href="/assets/js/219.e7af2cd6.js"><link rel="prefetch" href="/assets/js/22.d3c40f77.js"><link rel="prefetch" href="/assets/js/220.7e432864.js"><link rel="prefetch" href="/assets/js/221.36610552.js"><link rel="prefetch" href="/assets/js/222.25e8e7f8.js"><link rel="prefetch" href="/assets/js/223.b20b3618.js"><link rel="prefetch" href="/assets/js/224.d6416878.js"><link rel="prefetch" href="/assets/js/225.0a2305cd.js"><link rel="prefetch" href="/assets/js/226.eb68da7f.js"><link rel="prefetch" href="/assets/js/227.4fa42e52.js"><link rel="prefetch" href="/assets/js/228.7b949cda.js"><link rel="prefetch" href="/assets/js/229.d67e89d0.js"><link rel="prefetch" href="/assets/js/23.29a21ed9.js"><link rel="prefetch" href="/assets/js/230.a369851d.js"><link rel="prefetch" href="/assets/js/231.1622755c.js"><link rel="prefetch" href="/assets/js/232.59043227.js"><link rel="prefetch" href="/assets/js/233.7bd4f857.js"><link rel="prefetch" href="/assets/js/234.a8683432.js"><link rel="prefetch" href="/assets/js/235.985bb51e.js"><link rel="prefetch" href="/assets/js/236.d5acdb42.js"><link rel="prefetch" href="/assets/js/237.8206510f.js"><link rel="prefetch" href="/assets/js/238.deb3d1dd.js"><link rel="prefetch" href="/assets/js/239.35583cf1.js"><link rel="prefetch" href="/assets/js/24.ad4a09fe.js"><link rel="prefetch" href="/assets/js/240.cae79dfb.js"><link rel="prefetch" href="/assets/js/241.d9cdc884.js"><link rel="prefetch" href="/assets/js/242.5b570aaa.js"><link rel="prefetch" href="/assets/js/243.235176c6.js"><link rel="prefetch" href="/assets/js/244.4e60f0be.js"><link rel="prefetch" href="/assets/js/245.067a32fc.js"><link rel="prefetch" href="/assets/js/246.791a9d75.js"><link rel="prefetch" href="/assets/js/247.3fd60542.js"><link rel="prefetch" href="/assets/js/248.80aed4f4.js"><link rel="prefetch" href="/assets/js/249.9e432a0e.js"><link rel="prefetch" href="/assets/js/25.3fa12e86.js"><link rel="prefetch" href="/assets/js/26.d1030cce.js"><link rel="prefetch" href="/assets/js/27.de153401.js"><link rel="prefetch" href="/assets/js/28.0c656974.js"><link rel="prefetch" href="/assets/js/29.61302421.js"><link rel="prefetch" href="/assets/js/3.21405e5e.js"><link rel="prefetch" href="/assets/js/30.a3674254.js"><link rel="prefetch" href="/assets/js/31.5d6a5c4c.js"><link rel="prefetch" href="/assets/js/32.9684746d.js"><link rel="prefetch" href="/assets/js/33.4969bb36.js"><link rel="prefetch" href="/assets/js/34.62e60f7d.js"><link rel="prefetch" href="/assets/js/35.76538c0c.js"><link rel="prefetch" href="/assets/js/36.77895802.js"><link rel="prefetch" href="/assets/js/37.f9b7530b.js"><link rel="prefetch" href="/assets/js/38.face7d29.js"><link rel="prefetch" href="/assets/js/39.114525d7.js"><link rel="prefetch" href="/assets/js/4.ace105ca.js"><link rel="prefetch" href="/assets/js/40.f22eef7e.js"><link rel="prefetch" href="/assets/js/41.2a9e6b8e.js"><link rel="prefetch" href="/assets/js/42.7519d765.js"><link rel="prefetch" href="/assets/js/43.20f6db09.js"><link rel="prefetch" href="/assets/js/44.2885640e.js"><link rel="prefetch" href="/assets/js/45.b3eea2b1.js"><link rel="prefetch" href="/assets/js/46.427ee4ea.js"><link rel="prefetch" href="/assets/js/47.4a7f3700.js"><link rel="prefetch" href="/assets/js/48.9be04e94.js"><link rel="prefetch" href="/assets/js/49.9b4fa226.js"><link rel="prefetch" href="/assets/js/5.c76cd871.js"><link rel="prefetch" href="/assets/js/50.ce5386a3.js"><link rel="prefetch" href="/assets/js/51.ceb4f1ab.js"><link rel="prefetch" href="/assets/js/52.bd95d308.js"><link rel="prefetch" href="/assets/js/53.3b310e08.js"><link rel="prefetch" href="/assets/js/54.3b1fc870.js"><link rel="prefetch" href="/assets/js/55.af51a79d.js"><link rel="prefetch" href="/assets/js/56.9fcde4c7.js"><link rel="prefetch" href="/assets/js/57.9f05e2f1.js"><link rel="prefetch" href="/assets/js/58.c967af67.js"><link rel="prefetch" href="/assets/js/59.938170bd.js"><link rel="prefetch" href="/assets/js/6.a79dce78.js"><link rel="prefetch" href="/assets/js/60.ff70cff4.js"><link rel="prefetch" href="/assets/js/61.dfd2be8b.js"><link rel="prefetch" href="/assets/js/62.0ea5c43d.js"><link rel="prefetch" href="/assets/js/63.640259db.js"><link rel="prefetch" href="/assets/js/64.cd914434.js"><link rel="prefetch" href="/assets/js/65.05b17fda.js"><link rel="prefetch" href="/assets/js/66.fff0df7d.js"><link rel="prefetch" href="/assets/js/67.229d0cbe.js"><link rel="prefetch" href="/assets/js/68.59d347fd.js"><link rel="prefetch" href="/assets/js/69.c7fa913b.js"><link rel="prefetch" href="/assets/js/7.daa89620.js"><link rel="prefetch" href="/assets/js/70.6c48d37a.js"><link rel="prefetch" href="/assets/js/71.11764b88.js"><link rel="prefetch" href="/assets/js/72.c5a879c1.js"><link rel="prefetch" href="/assets/js/73.ff0c8585.js"><link rel="prefetch" href="/assets/js/74.216f033c.js"><link rel="prefetch" href="/assets/js/75.eca2c4de.js"><link rel="prefetch" href="/assets/js/76.7c4c9cb7.js"><link rel="prefetch" href="/assets/js/77.f2d262e3.js"><link rel="prefetch" href="/assets/js/78.f360821b.js"><link rel="prefetch" href="/assets/js/79.aa3c619e.js"><link rel="prefetch" href="/assets/js/80.7d63bacd.js"><link rel="prefetch" href="/assets/js/81.ce706b38.js"><link rel="prefetch" href="/assets/js/82.34afa4fe.js"><link rel="prefetch" href="/assets/js/83.69e981d5.js"><link rel="prefetch" href="/assets/js/84.75b98709.js"><link rel="prefetch" href="/assets/js/85.60037b3c.js"><link rel="prefetch" href="/assets/js/86.a43e8913.js"><link rel="prefetch" href="/assets/js/87.c3fcfcd5.js"><link rel="prefetch" href="/assets/js/88.b3709c0d.js"><link rel="prefetch" href="/assets/js/89.57b4e14a.js"><link rel="prefetch" href="/assets/js/90.507e7e1b.js"><link rel="prefetch" href="/assets/js/91.409ec5fd.js"><link rel="prefetch" href="/assets/js/92.b7916b40.js"><link rel="prefetch" href="/assets/js/93.2e56320b.js"><link rel="prefetch" href="/assets/js/94.05ea4b9e.js"><link rel="prefetch" href="/assets/js/95.3a5e00fa.js"><link rel="prefetch" href="/assets/js/96.194e1c6c.js"><link rel="prefetch" href="/assets/js/97.d56b0f2d.js"><link rel="prefetch" href="/assets/js/98.3f80a851.js"><link rel="prefetch" href="/assets/js/99.f5abe779.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.6dc52818.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a88dafb3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">whoway</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/1Db/" class="nav-link">
  ğŸ’¾æ•°æ®åº“
</a></div><div class="nav-item"><a href="/2Net/" class="nav-link">
  ğŸ”—ç½‘ç»œ
</a></div><div class="nav-item"><a href="/3Language/" class="nav-link">
  è¯­è¨€
</a></div><div class="nav-item"><a href="/4Linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/5Coding/" class="nav-link">
  Coding
</a></div><div class="nav-item"><a href="/6MacOS/" class="nav-link">
  MacOS
</a></div><div class="nav-item"><a href="/7Windows/" class="nav-link">
  Windows
</a></div><div class="nav-item"><a href="/8Engineer/" class="nav-link router-link-active">
  ğŸ”–åŸºç¡€è½¯ä»¶
</a></div><div class="nav-item"><a href="/9Status/" class="nav-link">
  ç½‘ç«™åŠ¨æ€
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/1Db/" class="nav-link">
  ğŸ’¾æ•°æ®åº“
</a></div><div class="nav-item"><a href="/2Net/" class="nav-link">
  ğŸ”—ç½‘ç»œ
</a></div><div class="nav-item"><a href="/3Language/" class="nav-link">
  è¯­è¨€
</a></div><div class="nav-item"><a href="/4Linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/5Coding/" class="nav-link">
  Coding
</a></div><div class="nav-item"><a href="/6MacOS/" class="nav-link">
  MacOS
</a></div><div class="nav-item"><a href="/7Windows/" class="nav-link">
  Windows
</a></div><div class="nav-item"><a href="/8Engineer/" class="nav-link router-link-active">
  ğŸ”–åŸºç¡€è½¯ä»¶
</a></div><div class="nav-item"><a href="/9Status/" class="nav-link">
  ç½‘ç«™åŠ¨æ€
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>CMakeå¿«é€Ÿä½¿ç”¨ç¬”è®°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#ç›®å½•" class="sidebar-link">ç›®å½•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_1-ä»‹ç»cmake" class="sidebar-link">1.ä»‹ç»CMake</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_2-cmakeå®‰è£…" class="sidebar-link">2.CMakeå®‰è£…</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_3-cmakeçš„æ­¥éª¤ã€Œæ¼”ç¤ºã€" class="sidebar-link">3.CMakeçš„æ­¥éª¤ã€Œæ¼”ç¤ºã€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_1-æ­¥éª¤ä¸€-å†™ä¸€ä¸ªmain-cpp" class="sidebar-link">1.æ­¥éª¤ä¸€ï¼Œå†™ä¸€ä¸ªmain.cpp</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_2-æ­¥éª¤äºŒ-å†™cmakelists-txt" class="sidebar-link">2.æ­¥éª¤äºŒï¼Œå†™CMakeLists.txt</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_3-æ­¥éª¤ä¸‰ã€ä½¿ç”¨cmake-ã€Œç”Ÿæˆmakefileæ–‡ä»¶ã€" class="sidebar-link">3.æ­¥éª¤ä¸‰ã€ä½¿ç”¨cmake .ã€Œç”Ÿæˆmakefileæ–‡ä»¶ã€</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_4-ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘" class="sidebar-link">4.ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘</a></li></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_4-cmakeä¸­ã€Œæ¼”ç¤ºã€çš„è¯­æ³•ä»‹ç»" class="sidebar-link">4.CMakeä¸­ã€Œæ¼”ç¤ºã€çš„è¯­æ³•ä»‹ç»</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#ğŸ”´projectå…³é”®å­—-project" class="sidebar-link">ğŸ”´PROJECTå…³é”®å­—(project)</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#ğŸ”´setå…³é”®å­—-set" class="sidebar-link">ğŸ”´SETå…³é”®å­—(set)</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#ğŸ”´messageå…³é”®å­—-message" class="sidebar-link">ğŸ”´MESSAGEå…³é”®å­—(message)</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#ğŸ”´add-executableå…³é”®å­—-add-executable" class="sidebar-link">ğŸ”´ADDEXECUTABLEå…³é”®å­—(addexecutable)</a></li></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_5-è¯­æ³•çš„åŸºæœ¬åŸåˆ™" class="sidebar-link">5.è¯­æ³•çš„åŸºæœ¬åŸåˆ™</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_5-1-è¯­æ³•æ³¨æ„äº‹é¡¹" class="sidebar-link">5.1.è¯­æ³•æ³¨æ„äº‹é¡¹</a></li></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_6-å†…éƒ¨-å¤–éƒ¨æ„å»º" class="sidebar-link">6.å†…éƒ¨/å¤–éƒ¨æ„å»º</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_7-è®©ã€Œæ¼”ç¤ºã€çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªå·¥ç¨‹â­ï¸" class="sidebar-link">7.è®©ã€Œæ¼”ç¤ºã€çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªå·¥ç¨‹â­ï¸</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_7-1-å°†ã€Œç›®æ ‡æ–‡ä»¶ã€æ”¾å…¥æ„å»ºç›®å½•çš„-ã€Œbin-å­ç›®å½•ã€" class="sidebar-link">7.1.å°†ã€Œç›®æ ‡æ–‡ä»¶ã€æ”¾å…¥æ„å»ºç›®å½•çš„ ã€Œbin å­ç›®å½•ã€</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#â­ï¸add-subdirectory-æŒ‡ä»¤-add-subdirectory" class="sidebar-link">â­ï¸ADDSUBDIRECTORY æŒ‡ä»¤(addsubdirectory)</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_7-3-æ›´æ”¹äºŒè¿›åˆ¶çš„ä¿å­˜è·¯å¾„ã€Œåˆ°binåˆ°ç›®å½•ã€" class="sidebar-link">7.3.æ›´æ”¹äºŒè¿›åˆ¶çš„ä¿å­˜è·¯å¾„ã€Œåˆ°binåˆ°ç›®å½•ã€</a></li></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_8-å®‰è£…â­ï¸" class="sidebar-link">8.å®‰è£…â­ï¸</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_8-1-å¦‚ä½•å®‰è£…helloword" class="sidebar-link">8.1.å¦‚ä½•å®‰è£…HelloWord</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_8-2-å®‰è£…æ–‡ä»¶copyrightå’Œreadme" class="sidebar-link">8.2.å®‰è£…æ–‡ä»¶COPYRIGHTå’ŒREADME</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_8-3-å®‰è£…è„šæœ¬runhello-sh" class="sidebar-link">8.3.å®‰è£…è„šæœ¬runhello.sh</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_8-4-å®‰è£…-doc-ä¸­çš„-hello-txt" class="sidebar-link">8.4.å®‰è£… doc ä¸­çš„ hello.txt</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_8-5-å®‰è£…è¿‡ç¨‹" class="sidebar-link">8.5.å®‰è£…è¿‡ç¨‹</a></li></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-é™æ€åº“å’ŒåŠ¨æ€åº“çš„æ„å»º" class="sidebar-link">9.é™æ€åº“å’ŒåŠ¨æ€åº“çš„æ„å»º</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-1-æ„å»ºå®ä¾‹" class="sidebar-link">9.1.æ„å»ºå®ä¾‹</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-2-add-library" class="sidebar-link">9.2.ADD_LIBRARY</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-3-åŒæ—¶æ„å»ºé™æ€å’ŒåŠ¨æ€åº“" class="sidebar-link">9.3.åŒæ—¶æ„å»ºé™æ€å’ŒåŠ¨æ€åº“</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-4-set-target-properties" class="sidebar-link">9.4.SET_TARGET_PROPERTIES</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-5-åŠ¨æ€åº“çš„ç‰ˆæœ¬å·" class="sidebar-link">9.5.åŠ¨æ€åº“çš„ç‰ˆæœ¬å·</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-6-å®‰è£…å…±äº«åº“å’Œå¤´æ–‡ä»¶" class="sidebar-link">9.6.å®‰è£…å…±äº«åº“å’Œå¤´æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-7-ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶" class="sidebar-link">9.7.ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-8-è§£å†³-makeåå¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜" class="sidebar-link">9.8.è§£å†³ï¼šmakeåå¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-9-è§£å†³-æ‰¾åˆ°å¼•ç”¨çš„å‡½æ•°é—®é¢˜" class="sidebar-link">9.9.è§£å†³ï¼šæ‰¾åˆ°å¼•ç”¨çš„å‡½æ•°é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_9-10-ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡-cmake-include-path-å’Œ-cmake-library-path" class="sidebar-link">9.10.ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡ CMAKE_INCLUDE_PATH å’Œ CMAKE_LIBRARY_PATH</a></li></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_10-ç¯å¢ƒå˜é‡æ¸…å•" class="sidebar-link">10.ç¯å¢ƒå˜é‡æ¸…å•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_11-å‘-cmake-æ·»åŠ åˆ†ææ ‡å¿—ä»¥ä½¿ç”¨-gprof" class="sidebar-link">11.å‘ CMake æ·»åŠ åˆ†ææ ‡å¿—ä»¥ä½¿ç”¨ gprof</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#_12-cmake-æŒ‡å®šç¼–è¯‘å™¨ä¸ºgcc-clang" class="sidebar-link">12.CMake æŒ‡å®šç¼–è¯‘å™¨ä¸ºgcc/clang</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/8Engineer/3.EngineeringExperience/2.cmake%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AE%B0.html#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cmakeå¿«é€Ÿä½¿ç”¨ç¬”è®°"><a href="#cmakeå¿«é€Ÿä½¿ç”¨ç¬”è®°" class="header-anchor">#</a> CMakeå¿«é€Ÿä½¿ç”¨ç¬”è®°</h1> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&lt;</span>font <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">&quot;background:yellow&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>font <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">&quot;background:pink&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>font <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">&quot;background: MediumSpringGreen&quot;</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="ç›®å½•"><a href="#ç›®å½•" class="header-anchor">#</a> ç›®å½•</h2> <p></p><div class="table-of-contents"><ul><li><a href="#ç›®å½•">ç›®å½•</a></li><li><a href="#_1-ä»‹ç»cmake">1.ä»‹ç»CMake</a></li><li><a href="#_2-cmakeå®‰è£…">2.CMakeå®‰è£…</a></li><li><a href="#_3-cmakeçš„æ­¥éª¤ã€Œæ¼”ç¤ºã€">3.CMakeçš„æ­¥éª¤ã€Œæ¼”ç¤ºã€</a><ul><li><a href="#_1-æ­¥éª¤ä¸€-å†™ä¸€ä¸ª-main-cpp">1.æ­¥éª¤ä¸€ï¼Œå†™ä¸€ä¸ªmain.cpp</a></li><li><a href="#_2-æ­¥éª¤äºŒ-å†™-cmakelists-txt">2.æ­¥éª¤äºŒï¼Œå†™CMakeLists.txt</a></li><li><a href="#_3-æ­¥éª¤ä¸‰ã€ä½¿ç”¨-cmake-ã€Œç”Ÿæˆmakefileæ–‡ä»¶ã€">3.æ­¥éª¤ä¸‰ã€ä½¿ç”¨cmake .ã€Œç”Ÿæˆmakefileæ–‡ä»¶ã€</a></li><li><a href="#_4-ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘">4.ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘</a></li></ul></li><li><a href="#_4-cmakeä¸­ã€Œæ¼”ç¤ºã€çš„è¯­æ³•ä»‹ç»">4.CMakeä¸­ã€Œæ¼”ç¤ºã€çš„è¯­æ³•ä»‹ç»</a><ul><li><a href="#ğŸ”´projectå…³é”®å­—-project">ğŸ”´PROJECTå…³é”®å­—(project)</a></li><li><a href="#ğŸ”´setå…³é”®å­—-set">ğŸ”´SETå…³é”®å­—(set)</a></li><li><a href="#ğŸ”´messageå…³é”®å­—-message">ğŸ”´MESSAGEå…³é”®å­—(message)</a></li><li><a href="#ğŸ”´add-executableå…³é”®å­—-add-executable">ğŸ”´ADDEXECUTABLEå…³é”®å­—(addexecutable)</a></li></ul></li><li><a href="#_5-è¯­æ³•çš„åŸºæœ¬åŸåˆ™">5.è¯­æ³•çš„åŸºæœ¬åŸåˆ™</a><ul><li><a href="#_5-1-è¯­æ³•æ³¨æ„äº‹é¡¹">5.1.è¯­æ³•æ³¨æ„äº‹é¡¹</a></li></ul></li><li><a href="#_6-å†…éƒ¨-å¤–éƒ¨æ„å»º">6.å†…éƒ¨/å¤–éƒ¨æ„å»º</a></li><li><a href="#_7-è®©ã€Œæ¼”ç¤ºã€çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªå·¥ç¨‹â­ï¸">7.è®©ã€Œæ¼”ç¤ºã€çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªå·¥ç¨‹â­ï¸</a><ul><li><a href="#_7-1-å°†ã€Œç›®æ ‡æ–‡ä»¶ã€æ”¾å…¥æ„å»ºç›®å½•çš„-ã€Œbin-å­ç›®å½•ã€">7.1.å°†ã€Œç›®æ ‡æ–‡ä»¶ã€æ”¾å…¥æ„å»ºç›®å½•çš„ ã€Œbin å­ç›®å½•ã€</a></li><li><a href="#â­ï¸add-subdirectory-æŒ‡ä»¤-add-subdirectory">â­ï¸ADDSUBDIRECTORY æŒ‡ä»¤(addsubdirectory)</a></li><li><a href="#_7-3-æ›´æ”¹äºŒè¿›åˆ¶çš„ä¿å­˜è·¯å¾„ã€Œåˆ°binåˆ°ç›®å½•ã€">7.3.æ›´æ”¹äºŒè¿›åˆ¶çš„ä¿å­˜è·¯å¾„ã€Œåˆ°binåˆ°ç›®å½•ã€</a></li></ul></li><li><a href="#_8-å®‰è£…â­ï¸">8.å®‰è£…â­ï¸</a><ul><li><a href="#_8-1-å¦‚ä½•å®‰è£…helloword">8.1.å¦‚ä½•å®‰è£…HelloWord</a></li><li><a href="#_8-2-å®‰è£…æ–‡ä»¶copyrightå’Œreadme">8.2.å®‰è£…æ–‡ä»¶COPYRIGHTå’ŒREADME</a></li><li><a href="#_8-3-å®‰è£…è„šæœ¬runhello-sh">8.3.å®‰è£…è„šæœ¬runhello.sh</a></li><li><a href="#_8-4-å®‰è£…-doc-ä¸­çš„-hello-txt">8.4.å®‰è£… doc ä¸­çš„ hello.txt</a></li><li><a href="#_8-5-å®‰è£…è¿‡ç¨‹">8.5.å®‰è£…è¿‡ç¨‹</a></li></ul></li><li><a href="#_9-é™æ€åº“å’ŒåŠ¨æ€åº“çš„æ„å»º">9.é™æ€åº“å’ŒåŠ¨æ€åº“çš„æ„å»º</a><ul><li><a href="#_9-1-æ„å»ºå®ä¾‹">9.1.æ„å»ºå®ä¾‹</a></li><li><a href="#_9-2-add-library">9.2.ADD_LIBRARY</a></li><li><a href="#_9-3-åŒæ—¶æ„å»ºé™æ€å’ŒåŠ¨æ€åº“">9.3.åŒæ—¶æ„å»ºé™æ€å’ŒåŠ¨æ€åº“</a></li><li><a href="#_9-4-set-target-properties">9.4.SET_TARGET_PROPERTIES</a></li><li><a href="#_9-5-åŠ¨æ€åº“çš„ç‰ˆæœ¬å·">9.5.åŠ¨æ€åº“çš„ç‰ˆæœ¬å·</a></li><li><a href="#_9-6-å®‰è£…å…±äº«åº“å’Œå¤´æ–‡ä»¶">9.6.å®‰è£…å…±äº«åº“å’Œå¤´æ–‡ä»¶</a></li><li><a href="#_9-7-ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶">9.7.ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶</a></li><li><a href="#_9-8-è§£å†³-makeåå¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜">9.8.è§£å†³ï¼šmakeåå¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜</a></li><li><a href="#_9-9-è§£å†³-æ‰¾åˆ°å¼•ç”¨çš„å‡½æ•°é—®é¢˜">9.9.è§£å†³ï¼šæ‰¾åˆ°å¼•ç”¨çš„å‡½æ•°é—®é¢˜</a></li><li><a href="#_9-10-ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡-cmake-include-path-å’Œ-cmake-library-path">9.10.ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡ CMAKE_INCLUDE_PATH å’Œ CMAKE_LIBRARY_PATH</a></li></ul></li><li><a href="#_10-ç¯å¢ƒå˜é‡æ¸…å•">10.ç¯å¢ƒå˜é‡æ¸…å•</a></li><li><a href="#_11-å‘-cmake-æ·»åŠ åˆ†ææ ‡å¿—ä»¥ä½¿ç”¨-gprof">11.å‘ CMake æ·»åŠ åˆ†ææ ‡å¿—ä»¥ä½¿ç”¨ gprof</a></li><li><a href="#_12-cmake-æŒ‡å®šç¼–è¯‘å™¨ä¸ºgcc-clang">12.CMake æŒ‡å®šç¼–è¯‘å™¨ä¸ºgcc/clang</a></li><li><a href="#å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</a></li></ul></div><p></p> <p>[TOC]</p> <h2 id="_1-ä»‹ç»cmake"><a href="#_1-ä»‹ç»cmake" class="header-anchor">#</a> 1.ä»‹ç»CMake</h2> <p>cmakeçš„å®šä¹‰æ˜¯ä»€ä¹ˆ ï¼Ÿ-â€”â€”é«˜çº§ç¼–è¯‘é…ç½®å·¥å…·</p> <p>å½“å¤šä¸ªäººç”¨<strong>ä¸åŒçš„è¯­è¨€</strong>æˆ–è€…<strong>ç¼–è¯‘å™¨</strong>å¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼Œæœ€ç»ˆè¦è¾“å‡ºä¸€ä¸ª<strong>å¯æ‰§è¡Œæ–‡ä»¶</strong>æˆ–è€…<strong>å…±äº«åº“</strong>ï¼ˆdllï¼Œsoç­‰ç­‰ï¼‰è¿™æ—¶å€™ç¥å™¨å°±å‡ºç°äº†â€”â€”CMakeï¼</p> <ul><li>æ‰€æœ‰æ“ä½œéƒ½æ˜¯é€šè¿‡<font style="background:yellow;">ç¼–è¯‘CMakeLists.txt</font>æ¥å®Œæˆçš„â€”ç®€å•</li></ul> <p>å®˜æ–¹ç½‘ç«™æ˜¯ <a href="http://www.cmake.org/" target="_blank" rel="noopener noreferrer">www.cmake.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œå¯ä»¥é€šè¿‡è®¿é—®å®˜æ–¹ç½‘ç«™è·å¾—æ›´å¤šå…³äº cmake çš„ä¿¡æ¯</p> <p>å­¦ä¹ CMakeçš„ç›®çš„ï¼Œä¸ºå°†æ¥å¤„ç†å¤§å‹çš„C/C++/JAVAé¡¹ç›®åšå‡†å¤‡</p> <h2 id="_2-cmakeå®‰è£…"><a href="#_2-cmakeå®‰è£…" class="header-anchor">#</a> 2.CMakeå®‰è£…</h2> <p>1ã€<font style="background:yellow;">ç»å¤§å¤šæ•°çš„linuxç³»ç»Ÿ</font>å·²ç»å®‰è£…äº†CMake</p> <p>2ã€Windowsæˆ–æŸäº›æ²¡æœ‰å®‰è£…è¿‡çš„linuxç³»ç»Ÿï¼Œå»<a href="http://www.cmake.org/HTML/Download.html" target="_blank" rel="noopener noreferrer">http://www.cmake.org/HTML/Download.htm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>l  å¯ä»¥ä¸‹è½½å®‰è£…</p> <h2 id="_3-cmakeçš„æ­¥éª¤ã€Œæ¼”ç¤ºã€"><a href="#_3-cmakeçš„æ­¥éª¤ã€Œæ¼”ç¤ºã€" class="header-anchor">#</a> 3.CMakeçš„æ­¥éª¤ã€Œæ¼”ç¤ºã€</h2> <h3 id="_1-æ­¥éª¤ä¸€-å†™ä¸€ä¸ªmain-cpp"><a href="#_1-æ­¥éª¤ä¸€-å†™ä¸€ä¸ªmain-cpp" class="header-anchor">#</a> 1.æ­¥éª¤ä¸€ï¼Œå†™ä¸€ä¸ª<code>main.cpp</code></h3> <ul><li><code>main.cpp</code></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//main.cpp</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span>  <span class="token string">&quot;hello word&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-æ­¥éª¤äºŒ-å†™cmakelists-txt"><a href="#_2-æ­¥éª¤äºŒ-å†™cmakelists-txt" class="header-anchor">#</a> 2.æ­¥éª¤äºŒï¼Œå†™<code>CMakeLists.txt</code></h3> <p>ã€Œæ³¨æ„<code>CMakeLists.txt</code>è¿™ä¸ªè¯è¯­è¦<strong>ä¸¥æ ¼åŒºåˆ†å¤§å°å†™</strong>çš„ã€</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">CMakeLists<span class="token punctuation">.</span>txt</span></span>

<span class="token function">PROJECT</span> <span class="token punctuation">(</span>HELLO<span class="token punctuation">)</span>

<span class="token function">SET</span><span class="token punctuation">(</span>SRC_LIST main<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>

<span class="token function">MESSAGE</span><span class="token punctuation">(</span>STATUS <span class="token string">&quot;This is BINARY dir &quot;</span> $<span class="token punctuation">{</span>HELLO_BINARY_DIR<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">MESSAGE</span><span class="token punctuation">(</span>STATUS <span class="token string">&quot;This is SOURCE dir &quot;</span>$<span class="token punctuation">{</span>HELLO_SOURCE_DIR<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">ADD_EXECUTABLE</span><span class="token punctuation">(</span>hello $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-æ­¥éª¤ä¸‰ã€ä½¿ç”¨cmake-ã€Œç”Ÿæˆmakefileæ–‡ä»¶ã€"><a href="#_3-æ­¥éª¤ä¸‰ã€ä½¿ç”¨cmake-ã€Œç”Ÿæˆmakefileæ–‡ä»¶ã€" class="header-anchor">#</a> 3.æ­¥éª¤ä¸‰ã€ä½¿ç”¨<code>cmake .</code>ã€Œç”Ÿæˆmakefileæ–‡ä»¶ã€</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>cmake <span class="token punctuation">.</span>

è¾“å‡ºï¼š
<span class="token punctuation">[</span>root@localhost cmake<span class="token punctuation">]</span># cmake <span class="token punctuation">.</span>
CMake <span class="token function">Warning</span> <span class="token punctuation">(</span>dev<span class="token punctuation">)</span> in CMakeLists<span class="token punctuation">.</span>txt<span class="token operator">:</span>
  Syntax Warning in cmake code at

    <span class="token operator">/</span>root<span class="token operator">/</span>cmake<span class="token operator">/</span>CMakeLists<span class="token punctuation">.</span>txt<span class="token operator">:</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">37</span>

  Argument <span class="token operator">not</span> separated from preceding token by whitespace<span class="token punctuation">.</span>
This warning is <span class="token keyword">for</span> project developers<span class="token punctuation">.</span>  Use <span class="token operator">-</span>Wno<span class="token operator">-</span>dev to suppress it<span class="token punctuation">.</span>

<span class="token operator">--</span> The C compiler identification is GNU <span class="token number">10.2</span><span class="token punctuation">.</span><span class="token number">1</span>
<span class="token operator">--</span> The CXX compiler identification is GNU <span class="token number">10.2</span><span class="token punctuation">.</span><span class="token number">1</span>
<span class="token operator">--</span> Check <span class="token keyword">for</span> working C compiler<span class="token operator">:</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>cc
<span class="token operator">--</span> Check <span class="token keyword">for</span> working C compiler<span class="token operator">:</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>cc <span class="token operator">--</span> works
<span class="token operator">--</span> Detecting C compiler ABI info
<span class="token operator">--</span> Detecting C compiler ABI info <span class="token operator">-</span> done
<span class="token operator">--</span> Check <span class="token keyword">for</span> working CXX compiler<span class="token operator">:</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>c<span class="token operator">++</span>
<span class="token operator">--</span> Check <span class="token keyword">for</span> working CXX compiler<span class="token operator">:</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>c<span class="token operator">++</span> <span class="token operator">--</span> works
<span class="token operator">--</span> Detecting CXX compiler ABI info
<span class="token operator">--</span> Detecting CXX compiler ABI info <span class="token operator">-</span> done
<span class="token operator">--</span> This is BINARY dir <span class="token operator">/</span>root<span class="token operator">/</span>cmake
<span class="token operator">--</span> This is SOURCE dir <span class="token operator">/</span>root<span class="token operator">/</span>cmake
<span class="token operator">--</span> Configuring done
<span class="token operator">--</span> Generating done
<span class="token operator">--</span> Build files have been written to<span class="token operator">:</span> <span class="token operator">/</span>root<span class="token operator">/</span>cmake
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>ç›®å½•ä¸‹å°±ç”Ÿæˆäº†è¿™äº›æ–‡ä»¶</p> <ul><li><font style="background:yellow;">CMakeFilesï¼ˆ<strong>æ–‡ä»¶å¤¹</strong>ï¼‰</font></li> <li>CMakeCache.txt</li> <li>cmake_install.cmake ç­‰æ–‡ä»¶</li> <li>å¹¶ä¸”ç”Ÿæˆäº†Makefile.</li></ul> <p>ç°åœ¨ä¸éœ€è¦ç†ä¼šè¿™äº›æ–‡ä»¶çš„ä½œç”¨ï¼Œä»¥åä½ ä¹Ÿå¯ä»¥ä¸å»ç†ä¼šã€‚</p> <p>æœ€å…³é”®çš„æ˜¯ï¼Œå®ƒè‡ªåŠ¨ç”Ÿæˆäº†Makefile.</p> <h3 id="_4-ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘"><a href="#_4-ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘" class="header-anchor">#</a> 4.ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>huwei@dell<span class="token operator">:</span><span class="token operator">~</span>$ make
Scanning dependencies of target hello
<span class="token punctuation">[</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">]</span> Building CXX object CMakeFiles<span class="token operator">/</span>hello<span class="token punctuation">.</span>dir<span class="token operator">/</span>main<span class="token punctuation">.</span>cpp<span class="token punctuation">.</span>o
<span class="token punctuation">[</span><span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">]</span> Linking CXX executable hello
<span class="token punctuation">[</span><span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">]</span> Built target hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æœ€ç»ˆç”Ÿæˆäº†Helloçš„å¯æ‰§è¡Œç¨‹åº</p> <h2 id="_4-cmakeä¸­ã€Œæ¼”ç¤ºã€çš„è¯­æ³•ä»‹ç»"><a href="#_4-cmakeä¸­ã€Œæ¼”ç¤ºã€çš„è¯­æ³•ä»‹ç»" class="header-anchor">#</a> 4.CMakeä¸­ã€Œæ¼”ç¤ºã€çš„è¯­æ³•ä»‹ç»</h2> <h3 id="ğŸ”´projectå…³é”®å­—-project"><a href="#ğŸ”´projectå…³é”®å­—-project" class="header-anchor">#</a> ğŸ”´PROJECTå…³é”®å­—(project)</h3> <blockquote><p>å¯ä»¥ç”¨æ¥æŒ‡å®š<strong>å·¥ç¨‹çš„åå­—</strong>å’Œ<strong>æ”¯æŒçš„è¯­è¨€</strong>ï¼Œé»˜è®¤æ”¯æŒæ‰€æœ‰è¯­è¨€</p></blockquote> <ul><li><code>PROJECT (HELLO)</code>   æŒ‡å®šäº†å·¥ç¨‹çš„åå­—ï¼Œå¹¶ä¸”æ”¯æŒæ‰€æœ‰è¯­è¨€â€”å»ºè®®</li> <li><code>PROJECT (HELLO CXX)</code>      æŒ‡å®šäº†å·¥ç¨‹çš„åå­—ï¼Œå¹¶ä¸”æ”¯æŒè¯­è¨€æ˜¯C++</li> <li><code>PROJECT (HELLO C CXX)</code>      æŒ‡å®šäº†å·¥ç¨‹çš„åå­—ï¼Œå¹¶ä¸”æ”¯æŒè¯­è¨€æ˜¯Cå’ŒC++</li></ul> <p>è¯¥æŒ‡å®š==éšå¼å®šä¹‰==äº†ä¸¤ä¸ªCMAKEçš„å˜é‡</p> <p><code>&lt;projectname&gt;_BINARY_DIR</code>ï¼Œæœ¬ä¾‹ä¸­æ˜¯ <code>HELLO_BINARY_DIR</code></p> <p><code>&lt;projectname&gt;_SOURCE_DIR</code>ï¼Œæœ¬ä¾‹ä¸­æ˜¯ <code>HELLO_SOURCE_DIR</code></p> <p>MESSAGEå…³é”®å­—å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œå½“å‰éƒ½æŒ‡å‘å½“å‰çš„å·¥ä½œç›®å½•ï¼Œåé¢ä¼šè®²==å¤–éƒ¨ç¼–è¯‘==</p> <p>é—®é¢˜ï¼šå¦‚æœæ”¹äº†å·¥ç¨‹åï¼Œè¿™ä¸¤ä¸ªå˜é‡åä¹Ÿä¼šæ”¹å˜</p> <p>è§£å†³ï¼šåˆå®šä¹‰ä¸¤ä¸ªé¢„å®šä¹‰å˜é‡ï¼š<code>PROJECT_BINARY_DIR</code>å’Œ<code>PROJECT_SOURCE_DIR</code>ï¼Œè¿™ä¸¤ä¸ªå˜é‡å’Œ<code>HELLO_BINARY_DIR</code>ï¼Œ<code>HELLO_SOURCE_DIR</code>æ˜¯ä¸€è‡´çš„ã€‚æ‰€ä»¥æ”¹äº†å·¥ç¨‹åä¹Ÿæ²¡æœ‰å…³ç³»</p> <h3 id="ğŸ”´setå…³é”®å­—-set"><a href="#ğŸ”´setå…³é”®å­—-set" class="header-anchor">#</a> ğŸ”´SETå…³é”®å­—(set)</h3> <ul><li><font style="background:yellow;">set</font>,è®¾ç½®</li></ul> <blockquote><p>ç”¨æ¥<strong>æ˜¾ç¤º</strong>çš„<strong>æŒ‡å®šå˜é‡</strong>çš„</p></blockquote> <p><code>SET(SRC_LIST main.cpp)</code></p> <ul><li><code>SRC_LIST</code>å˜é‡å°±åŒ…å«äº†main.cpp</li></ul> <p>ä¹Ÿå¯ä»¥ <code>SET(SRC_LIST main.cpp t1.cpp t2.cpp)</code></p> <h3 id="ğŸ”´messageå…³é”®å­—-message"><a href="#ğŸ”´messageå…³é”®å­—-message" class="header-anchor">#</a> ğŸ”´MESSAGEå…³é”®å­—(message)</h3> <blockquote><p>å‘ç»ˆç«¯<strong>è¾“å‡º</strong>ç”¨æˆ·è‡ªå®šä¹‰çš„ä¿¡æ¯</p></blockquote> <p>ä¸»è¦åŒ…å«ä¸‰ç§ä¿¡æ¯ï¼š</p> <ul><li><code>SEND_ERROR</code>ï¼Œäº§ç”Ÿé”™è¯¯ï¼Œç”Ÿæˆè¿‡ç¨‹è¢«è·³è¿‡ã€‚</li> <li><code>SATUS</code>ï¼Œè¾“å‡ºå‰ç¼€ä¸º<code>â€”</code>çš„ä¿¡æ¯ã€‚</li> <li><code>FATAL_ERROR</code>ï¼Œç«‹å³<strong>ç»ˆæ­¢</strong>æ‰€æœ‰ cmake è¿‡ç¨‹.</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>MESSAGE<span class="token punctuation">(</span>STATUS <span class="token string">&quot;This is BINARY dir &quot;</span> <span class="token variable">${HELLO_BINARY_DIR}</span><span class="token punctuation">)</span>

MESSAGE<span class="token punctuation">(</span>STATUS <span class="token string">&quot;This is SOURCE dir &quot;</span><span class="token variable">${HELLO_SOURCE_DIR}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>huwei@dell:~$ cmake <span class="token builtin class-name">.</span>
CMake Warning <span class="token punctuation">(</span>dev<span class="token punctuation">)</span> at CMakeLists.txt:7:
  Syntax Warning <span class="token keyword">in</span> cmake code at <span class="token function">column</span> <span class="token number">37</span>

  Argument not separated from preceding token by whitespace.
This warning is <span class="token keyword">for</span> project developers.  Use -Wno-dev to suppress it.

-- The C compiler identification is GNU <span class="token number">9.4</span>.0
-- The CXX compiler identification is GNU <span class="token number">9.4</span>.0
-- Check <span class="token keyword">for</span> working C compiler: /usr/bin/cc
-- Check <span class="token keyword">for</span> working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - <span class="token keyword">done</span>
-- Detecting C compile features
-- Detecting C compile features - <span class="token keyword">done</span>
-- Check <span class="token keyword">for</span> working CXX compiler: /usr/bin/c++
-- Check <span class="token keyword">for</span> working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - <span class="token keyword">done</span>
-- Detecting CXX compile features
-- Detecting CXX compile features - <span class="token keyword">done</span>
-- This is BINARY <span class="token function">dir</span> /home/huwei  ğŸ”´
-- This is SOURCE <span class="token function">dir</span> /home/huwei  ğŸ”´
-- Configuring <span class="token keyword">done</span>
-- Generating <span class="token keyword">done</span>
-- Build files have been written to: /home/huwei

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="ğŸ”´add-executableå…³é”®å­—-add-executable"><a href="#ğŸ”´add-executableå…³é”®å­—-add-executable" class="header-anchor">#</a> ğŸ”´ADD_EXECUTABLEå…³é”®å­—(add_executable)</h3> <blockquote><p>ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶(add_executable)</p></blockquote> <p><code>ADD_EXECUTABLE(hello ${SRC_LIST})</code></p> <ul><li>ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åæ˜¯helloï¼Œæºæ–‡ä»¶è¯»å–å˜é‡<code>SRC_LIST</code>ä¸­çš„å†…å®¹</li></ul> <p>ä¹Ÿå¯ä»¥ç›´æ¥å†™ <code>ADD_EXECUTABLE(hello main.cpp)</code></p> <p>ä¸Šè¿°ä¾‹å­å¯ä»¥ç®€åŒ–çš„å†™æˆ</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>PROJECT<span class="token punctuation">(</span>HELLO<span class="token punctuation">)</span>
ADD_EXECUTABLE<span class="token punctuation">(</span>hello main.cpp<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>æ³¨æ„ï¼š<strong>å·¥ç¨‹åçš„ HELLO</strong> å’Œç”Ÿæˆçš„<strong>å¯æ‰§è¡Œæ–‡ä»¶ hello</strong> æ˜¯<strong>æ²¡æœ‰ä»»ä½•å…³ç³»</strong>çš„</p></blockquote> <h2 id="_5-è¯­æ³•çš„åŸºæœ¬åŸåˆ™"><a href="#_5-è¯­æ³•çš„åŸºæœ¬åŸåˆ™" class="header-anchor">#</a> 5.è¯­æ³•çš„åŸºæœ¬åŸåˆ™</h2> <ul><li><p>==å˜é‡ä½¿ç”¨<code>${}</code>æ–¹å¼å–å€¼==ï¼Œä½†æ˜¯åœ¨ IF æ§åˆ¶è¯­å¥ä¸­æ˜¯ç›´æ¥ä½¿ç”¨å˜é‡å</p></li> <li><p><code>æŒ‡ä»¤(å‚æ•° 1 å‚æ•° 2...)</code></p> <ul><li>å‚æ•°ä½¿ç”¨æ‹¬å¼§æ‹¬èµ·ï¼Œå‚æ•°ä¹‹é—´ä½¿ç”¨ç©ºæ ¼æˆ–åˆ†å·åˆ†å¼€ã€‚ ä»¥ä¸Šé¢çš„ <code>ADD_EXECUTABLE</code> æŒ‡ä»¤ä¸ºä¾‹ï¼Œå¦‚æœå­˜åœ¨å¦å¤–ä¸€ä¸ª <code>func.cpp</code> æºæ–‡ä»¶ï¼Œå°±è¦å†™æˆï¼š<code>ADD_EXECUTABLE(hello main.cpp func.cpp)</code>æˆ–è€…<code>ADD_EXECUTABLE(hello main.cpp;func.cpp)</code></li></ul></li> <li><p>æŒ‡ä»¤æ˜¯<strong>å¤§å°å†™æ— å…³</strong>çš„ï¼Œå‚æ•°å’Œå˜é‡æ˜¯å¤§å°å†™ç›¸å…³çš„ã€‚ä½†æ¨èä½ å…¨éƒ¨ä½¿ç”¨å¤§å†™æŒ‡ä»¤</p></li></ul> <h3 id="_5-1-è¯­æ³•æ³¨æ„äº‹é¡¹"><a href="#_5-1-è¯­æ³•æ³¨æ„äº‹é¡¹" class="header-anchor">#</a> 5.1.è¯­æ³•æ³¨æ„äº‹é¡¹</h3> <ul><li><code>SET(SRC_LIST main.cpp)</code> å¯ä»¥å†™æˆ <code>SET(SRC_LIST â€œmain.cppâ€)</code>ï¼Œ==å¦‚æœ<strong>æºæ–‡ä»¶å</strong>ä¸­å«æœ‰<strong>ç©ºæ ¼</strong>ï¼Œå°±<strong>å¿…é¡»</strong>è¦åŠ <strong>åŒå¼•å·</strong>==</li> <li><code>ADD_EXECUTABLE(hello main)</code> åç¼€å¯ä»¥ä¸è¡Œï¼Œä»–ä¼šè‡ªåŠ¨å»æ‰¾<code>.c</code>å’Œ<code>.cpp</code>ï¼Œæœ€å¥½ä¸è¦è¿™æ ·å†™ï¼Œå¯èƒ½ä¼šæœ‰è¿™ä¸¤ä¸ªæ–‡ä»¶<code>main.cpp</code>å’Œ<code>main</code></li></ul> <h2 id="_6-å†…éƒ¨-å¤–éƒ¨æ„å»º"><a href="#_6-å†…éƒ¨-å¤–éƒ¨æ„å»º" class="header-anchor">#</a> 6.å†…éƒ¨/å¤–éƒ¨æ„å»º</h2> <ul><li><font style="background:yellow;">ä¸Šè¿°ä¾‹å­å°±æ˜¯å†…éƒ¨æ„å»º</font>ï¼Œä»–ç”Ÿäº§çš„ä¸´æ—¶æ–‡ä»¶ç‰¹åˆ«å¤šï¼Œä¸æ–¹ä¾¿æ¸…ç†</li> <li>å¤–éƒ¨æ„å»ºï¼Œå°±ä¼šæŠŠ<strong>ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶</strong>æ”¾åœ¨<strong>buildç›®å½•</strong>ä¸‹ï¼Œä¸ä¼šå¯¹æºæ–‡ä»¶æœ‰ä»»ä½•å½±å“
<ul><li><strong>å¼ºçƒˆå»ºè®®ä½¿ç”¨å¤–éƒ¨æ„å»ºæ–¹å¼</strong></li> <li>æ¯”å¦‚gromacsé¡¹ç›®å°±æ˜¯å¤–éƒ¨æ„å»º</li></ul></li></ul> <blockquote><p>å¤–éƒ¨æ„å»ºæ–¹å¼ä¸¾ä¾‹</p></blockquote> <p>æ–¹æ³•ï¼ˆæ‰‹åŠ¨ï¼‰</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>//ä¾‹å­ç›®å½•ï¼ŒCMakeLists.txtå’Œä¸Šé¢ä¾‹å­ä¸€è‡´
<span class="token punctuation">[</span>root@localhost cmake<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/root/cmake
<span class="token punctuation">[</span>root@localhost cmake<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">8</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">198</span> Dec <span class="token number">28</span> <span class="token number">20</span>:59 CMakeLists.txt
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">76</span> Dec <span class="token number">28</span> 00:18 main.cpp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><p>1.å»ºç«‹ä¸€ä¸ªbuildç›®å½•ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ï¼Œå»ºè®®åœ¨å½“å‰ç›®å½•ä¸‹</p></li> <li><p>2.cdè¿›å…¥buildï¼Œè¿è¡Œ<code>cmake ..</code>    å½“ç„¶<code>..</code>è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•</p> <ul><li>ä½ å¯ä»¥å†™<code>CMakeLists.txt</code><strong>æ‰€åœ¨çš„ç»å¯¹è·¯å¾„</strong>ï¼Œç”Ÿæˆçš„æ–‡ä»¶éƒ½åœ¨buildç›®å½•ä¸‹äº†</li></ul></li> <li><p>3.åœ¨buildç›®å½•ä¸‹ï¼Œè¿è¡Œmakeæ¥æ„å»ºå·¥ç¨‹</p></li></ul> <p>ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> build
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> install-cmake
<span class="token builtin class-name">cd</span> build
cmake <span class="token punctuation">..</span> <span class="token parameter variable">-DCMAKE_INSTALL_PREFIX</span><span class="token operator">=~</span>/exp/gromacs-2020.5/install-cmake  <span class="token parameter variable">-DGMX_SIMD</span><span class="token operator">=</span>None <span class="token parameter variable">-DGMX_BUILD_OWN_FFTW</span><span class="token operator">=</span>ON   <span class="token parameter variable">-DREGRESSIONTEST_DOWNLOAD</span><span class="token operator">=</span>ON
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ³¨æ„<strong>å¤–éƒ¨æ„å»º</strong>çš„==ä¸¤ä¸ªå˜é‡==</p> <p>1.<code>HELLO_SOURCE_DIR</code>  è¿˜æ˜¯==å·¥ç¨‹è·¯å¾„==</p> <p>2.<code>HELLO_BINARY_DIR</code>   ==ç¼–è¯‘è·¯å¾„== ä¹Ÿå°±æ˜¯ <code>/root/cmake/bulid</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>huwei@dell:~/auto/exp/build$ cmake <span class="token punctuation">..</span>
CMake Warning <span class="token punctuation">(</span>dev<span class="token punctuation">)</span> at CMakeLists.txt:9:
  Syntax Warning <span class="token keyword">in</span> cmake code at <span class="token function">column</span> <span class="token number">37</span>

  Argument not separated from preceding token by whitespace.
This warning is <span class="token keyword">for</span> project developers.  Use -Wno-dev to suppress it.

-- The C compiler identification is GNU <span class="token number">9.4</span>.0
-- The CXX compiler identification is GNU <span class="token number">9.4</span>.0
-- Check <span class="token keyword">for</span> working C compiler: /usr/bin/cc
-- Check <span class="token keyword">for</span> working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - <span class="token keyword">done</span>
-- Detecting C compile features
-- Detecting C compile features - <span class="token keyword">done</span>
-- Check <span class="token keyword">for</span> working CXX compiler: /usr/bin/c++
-- Check <span class="token keyword">for</span> working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - <span class="token keyword">done</span>
-- Detecting CXX compile features
-- Detecting CXX compile features - <span class="token keyword">done</span>
-- This is BINARY <span class="token function">dir</span> /home/huwei/auto/exp/build
-- This is SOURCE <span class="token function">dir</span> /home/huwei/auto/exp
-- Configuring <span class="token keyword">done</span>
-- Generating <span class="token keyword">done</span>
-- Build files have been written to: /home/huwei/auto/exp/build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_7-è®©ã€Œæ¼”ç¤ºã€çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªå·¥ç¨‹â­ï¸"><a href="#_7-è®©ã€Œæ¼”ç¤ºã€çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªå·¥ç¨‹â­ï¸" class="header-anchor">#</a> 7.è®©ã€Œæ¼”ç¤ºã€çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªå·¥ç¨‹â­ï¸</h2> <p><strong>ç›®æ ‡</strong>ï¼š</p> <ul><li>ä¸ºå·¥ç¨‹æ·»åŠ ä¸€ä¸ªå­ç›®å½• <code>src</code>ï¼Œç”¨æ¥æ”¾ç½®<strong>å·¥ç¨‹æºä»£ç </strong></li> <li>æ·»åŠ ä¸€ä¸ªå­ç›®å½• <code>doc</code>ï¼Œç”¨æ¥æ”¾ç½®è¿™ä¸ª<strong>å·¥ç¨‹çš„æ–‡æ¡£</strong> <code>hello.txt</code></li> <li>åœ¨å·¥ç¨‹ç›®å½•æ·»åŠ æ–‡æœ¬æ–‡ä»¶ <code>COPYRIGHT</code>,  <code>README</code></li> <li>åœ¨å·¥ç¨‹ç›®å½•æ·»åŠ ä¸€ä¸ª <code>runhello.sh</code>è„šæœ¬ï¼Œç”¨æ¥è°ƒç”¨ hello äºŒè¿›åˆ¶</li> <li>å°†æ„å»ºåçš„ç›®æ ‡æ–‡ä»¶æ”¾å…¥<strong>æ„å»ºç›®å½•</strong>çš„ <code>bin å­ç›®å½•</code></li> <li>å°† docç›®å½•çš„å†…å®¹ä»¥åŠ <code>COPYRIGHT/README</code> å®‰è£…åˆ°<code>/usr/share/doc/cmake/</code></li></ul> <h3 id="_7-1-å°†ã€Œç›®æ ‡æ–‡ä»¶ã€æ”¾å…¥æ„å»ºç›®å½•çš„-ã€Œbin-å­ç›®å½•ã€"><a href="#_7-1-å°†ã€Œç›®æ ‡æ–‡ä»¶ã€æ”¾å…¥æ„å»ºç›®å½•çš„-ã€Œbin-å­ç›®å½•ã€" class="header-anchor">#</a> 7.1.å°†ã€Œç›®æ ‡æ–‡ä»¶ã€æ”¾å…¥æ„å»ºç›®å½•çš„ ã€Œbin å­ç›®å½•ã€</h3> <p><strong>æ¯ä¸ªç›®å½•</strong>ä¸‹éƒ½è¦æœ‰ä¸€ä¸ª<code>CMakeLists.txt</code>è¯´æ˜</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token punctuation">[</span>root@localhost cmake<span class="token punctuation">]</span># tree
<span class="token punctuation">.</span>
â”œâ”€â”€ build
â”œâ”€â”€ CMakeLists<span class="token punctuation">.</span>txt
â””â”€â”€ src
    â”œâ”€â”€ CMakeLists<span class="token punctuation">.</span>txt
    â””â”€â”€ main<span class="token punctuation">.</span>cpp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>å¤–å±‚</strong>CMakeLists.txt</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">PROJECT</span><span class="token punctuation">(</span>HELLO<span class="token punctuation">)</span>
<span class="token function">ADD_SUBDIRECTORY</span><span class="token punctuation">(</span>src bin<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>srcä¸‹</strong>çš„CMakeLists.txt</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">ADD_EXECUTABLE</span><span class="token punctuation">(</span>hello main<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="â­ï¸add-subdirectory-æŒ‡ä»¤-add-subdirectory"><a href="#â­ï¸add-subdirectory-æŒ‡ä»¤-add-subdirectory" class="header-anchor">#</a> â­ï¸ADD_SUBDIRECTORY æŒ‡ä»¤(add_subdirectory)</h3> <p>ä½œç”¨1:å‘Šè¯‰cmakeï¼Œæˆ‘è¿˜æœ‰1ä¸ªç›®å½•</p> <p>ä½œç”¨2:æˆ‘è¦åœ¨srcä¸‹å†™ä¸Š1ä¸ªbin</p> <p>æ³¨æ„ï¼šæˆ‘ä»¬çš„ADD_SUBDIRECTORYæ˜¯åœ¨å“ªä¸ªCMakeListsé‡Œé¢å†™çš„å‘¢ï¼Ÿæ˜¯åœ¨æœ€å¤–å±‚ï¼Œæ¥å‘Šè¯‰cmakeæœ‰src</p> <p><code>ADD_SUBDIRECTORY(source_dir [binary_dir] [EXCLUDE_FROM_ALL])</code></p> <p>æºç ç›®å½•ã€äºŒè¿›åˆ¶ç›®å½•ã€‘</p> <ul><li>è¿™ä¸ªæŒ‡ä»¤ç”¨äºå‘å½“å‰å·¥ç¨‹æ·»åŠ å­˜æ”¾æºæ–‡ä»¶çš„å­ç›®å½•ï¼Œå¹¶å¯ä»¥æŒ‡å®šä¸­é—´äºŒè¿›åˆ¶å’Œç›®æ ‡äºŒè¿›åˆ¶å­˜æ”¾çš„ä½ç½®</li> <li><code>EXCLUDE_FROM_ALL</code>å‡½æ•°æ˜¯å°†å†™çš„ç›®å½•ä»ç¼–è¯‘ä¸­æ’é™¤ï¼Œå¦‚ç¨‹åºä¸­çš„example</li> <li><code>ADD_SUBDIRECTORY(src bin)</code> <ul><li>å°† <strong>src å­ç›®å½•</strong>åŠ å…¥å·¥ç¨‹å¹¶æŒ‡å®š<strong>ç¼–è¯‘è¾“å‡º</strong>(åŒ…å«ç¼–è¯‘ä¸­é—´ç»“æœ)<strong>è·¯å¾„ä¸ºbin ç›®å½•</strong>ã€Œè‡ªåŠ¨æ–°å»ºbinã€
<ul><li>å¦‚æœ<strong>ä¸è¿›è¡Œ</strong> bin ç›®å½•çš„æŒ‡å®šï¼Œé‚£ä¹ˆ<strong>ç¼–è¯‘ç»“æœ</strong>(åŒ…æ‹¬ä¸­é—´ç»“æœ)éƒ½å°†å­˜æ”¾åœ¨<code>build/src</code>ç›®å½•</li></ul></li></ul></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>huwei@dell:~/auto/exp$  tree
<span class="token builtin class-name">.</span>
â”œâ”€â”€ build
â”œâ”€â”€ CMakeLists.txt
â””â”€â”€ src
    â”œâ”€â”€ CMakeLists.txt
    â””â”€â”€ main.cpp

<span class="token number">2</span> directories, <span class="token number">3</span> files
huwei@dell:~/auto/exp$ <span class="token builtin class-name">cd</span> build/
huwei@dell:~/auto/exp/build$ cmake <span class="token punctuation">..</span>
-- The C compiler identification is GNU <span class="token number">9.4</span>.0
-- The CXX compiler identification is GNU <span class="token number">9.4</span>.0
-- Check <span class="token keyword">for</span> working C compiler: /usr/bin/cc
-- Check <span class="token keyword">for</span> working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - <span class="token keyword">done</span>
-- Detecting C compile features
-- Detecting C compile features - <span class="token keyword">done</span>
-- Check <span class="token keyword">for</span> working CXX compiler: /usr/bin/c++
-- Check <span class="token keyword">for</span> working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - <span class="token keyword">done</span>
-- Detecting CXX compile features
-- Detecting CXX compile features - <span class="token keyword">done</span>
CMake Warning <span class="token punctuation">(</span>dev<span class="token punctuation">)</span> <span class="token keyword">in</span> CMakeLists.txt:
  No cmake_minimum_required <span class="token builtin class-name">command</span> is present.  A line of code such as

    cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.16</span><span class="token punctuation">)</span>

  should be added at the <span class="token function">top</span> of the file.  The version specified may be lower
  <span class="token keyword">if</span> you wish to support older CMake versions <span class="token keyword">for</span> this project.  For <span class="token function">more</span>
  information run <span class="token string">&quot;cmake --help-policy CMP0000&quot;</span><span class="token builtin class-name">.</span>
This warning is <span class="token keyword">for</span> project developers.  Use -Wno-dev to suppress it.

-- Configuring <span class="token keyword">done</span>
-- Generating <span class="token keyword">done</span>
-- Build files have been written to: /home/huwei/auto/exp/build
huwei@dell:~/auto/exp/build$ <span class="token function">ls</span>
binâ­ï¸  CMakeCache.txt  CMakeFiles  cmake_install.cmake  Makefile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><ul><li>ç„¶åmakeï¼Œå‘ç°åœ¨biné‡Œé¢</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>huwei@dell:~/auto/exp/build$ <span class="token function">make</span>
Scanning dependencies of target hello
<span class="token punctuation">[</span> <span class="token number">50</span>%<span class="token punctuation">]</span> Building CXX object bin/CMakeFiles/hello.dir/main.o
<span class="token punctuation">[</span><span class="token number">100</span>%<span class="token punctuation">]</span> Linking CXX executable hello
<span class="token punctuation">[</span><span class="token number">100</span>%<span class="token punctuation">]</span> Built target hello
huwei@dell:~/auto/exp/build$ l
bin/  CMakeCache.txt  CMakeFiles/  cmake_install.cmake  Makefile
huwei@dell:~/auto/exp/build$ <span class="token function">ls</span> bin/â­ï¸
CMakeFiles  cmake_install.cmake  hello â­ï¸ Makefile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_7-3-æ›´æ”¹äºŒè¿›åˆ¶çš„ä¿å­˜è·¯å¾„ã€Œåˆ°binåˆ°ç›®å½•ã€"><a href="#_7-3-æ›´æ”¹äºŒè¿›åˆ¶çš„ä¿å­˜è·¯å¾„ã€Œåˆ°binåˆ°ç›®å½•ã€" class="header-anchor">#</a> 7.3.æ›´æ”¹äºŒè¿›åˆ¶çš„ä¿å­˜è·¯å¾„ã€Œåˆ°binåˆ°ç›®å½•ã€</h3> <p>SET æŒ‡ä»¤é‡æ–°å®šä¹‰ <code>EXECUTABLE_OUTPUT_PATH</code> å’Œ <code>LIBRARY_OUTPUT_PATH</code> å˜é‡ æ¥æŒ‡å®šæœ€ç»ˆçš„ç›®æ ‡äºŒè¿›åˆ¶çš„ä½ç½®</p> <ul><li><code>SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)</code></li> <li><code>SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)</code></li></ul> <p>æ€è€ƒï¼šåŠ è½½å“ªä¸ªCMakeLists.txtå½“ä¸­</p> <p>å“ªé‡Œè¦æ”¹å˜ç›®æ ‡å­˜æ”¾è·¯å¾„ï¼Œå°±åœ¨å“ªé‡ŒåŠ å…¥ä¸Šè¿°çš„å®šä¹‰ï¼Œæ‰€ä»¥åº”è¯¥<strong>åœ¨srcä¸‹</strong>çš„CMakeLists.txtä¸‹å†™</p> <h2 id="_8-å®‰è£…â­ï¸"><a href="#_8-å®‰è£…â­ï¸" class="header-anchor">#</a> 8.å®‰è£…â­ï¸</h2> <ul><li>ä¸€ç§æ˜¯ä»ä»£ç ç¼–è¯‘åç›´æ¥ <code>make install</code> å®‰è£…</li> <li>ä¸€ç§æ˜¯æ‰“åŒ…æ—¶çš„<strong>æŒ‡å®šç›®å½•</strong>å®‰è£…ã€‚
<ul><li>ç®€å•çš„å¯ä»¥è¿™æ ·æŒ‡å®šç›®å½•ï¼š<code>make install DESTDIR=/tmp/test</code></li> <li>ç¨å¾®å¤æ‚ä¸€ç‚¹å¯ä»¥è¿™æ ·æŒ‡å®šç›®å½•ï¼š<code>./configure â€“prefix=/usr</code> <ul><li>è¿™ä¸ªç”¨æ³•æ¯”è¾ƒé«˜çº§ä¸€ç‚¹ï¼</li></ul></li></ul></li></ul> <h3 id="_8-1-å¦‚ä½•å®‰è£…helloword"><a href="#_8-1-å¦‚ä½•å®‰è£…helloword" class="header-anchor">#</a> 8.1.å¦‚ä½•å®‰è£…HelloWord</h3> <p>ä½¿ç”¨CMAKEä¸€ä¸ªæ–°çš„æŒ‡ä»¤ï¼šINSTALL</p> <p>INSTALLçš„å®‰è£…å¯ä»¥åŒ…æ‹¬ï¼šäºŒè¿›åˆ¶ã€åŠ¨æ€åº“ã€é™æ€åº“ä»¥åŠæ–‡ä»¶ã€ç›®å½•ã€è„šæœ¬ç­‰</p> <p>ä½¿ç”¨CMAKEä¸€ä¸ªæ–°çš„<strong>å˜é‡</strong>ï¼š<code>CMAKE_INSTALL_PREFIX</code></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// ç›®å½•æ ‘ç»“æ„</span>
<span class="token punctuation">[</span>root@localhost cmake<span class="token punctuation">]</span># tree
<span class="token punctuation">.</span>
â”œâ”€â”€ build
â”œâ”€â”€ CMakeLists<span class="token punctuation">.</span>txt
â”œâ”€â”€ COPYRIGHT
â”œâ”€â”€ doc
â”‚   â””â”€â”€ hello<span class="token punctuation">.</span>txt
â”œâ”€â”€ README
â”œâ”€â”€ runhello<span class="token punctuation">.</span>sh
â””â”€â”€ src
    â”œâ”€â”€ CMakeLists<span class="token punctuation">.</span>txt
    â””â”€â”€ main<span class="token punctuation">.</span>cpp

<span class="token number">3</span> directories<span class="token punctuation">,</span> <span class="token number">7</span> files
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_8-2-å®‰è£…æ–‡ä»¶copyrightå’Œreadme"><a href="#_8-2-å®‰è£…æ–‡ä»¶copyrightå’Œreadme" class="header-anchor">#</a> 8.2.å®‰è£…æ–‡ä»¶COPYRIGHTå’ŒREADME</h3> <p>INSTALL(FILES COPYRIGHT README DESTINATION share/doc/cmake/)</p> <p>FILESï¼šæ–‡ä»¶</p> <p>DESTINATIONï¼š</p> <p>1ã€å†™ç»å¯¹è·¯å¾„</p> <p>2ã€å¯ä»¥å†™ç›¸å¯¹è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„å®é™…è·¯å¾„æ˜¯ï¼š<code>${CMAKE_INSTALL_PREFIX}/&lt;DESTINATION å®šä¹‰çš„è·¯å¾„&gt;</code></p> <ul><li><code>CMAKE_INSTALL_PREFIX</code>  é»˜è®¤æ˜¯åœ¨ <code>/usr/local/</code></li> <li><code>cmake -DCMAKE_INSTALL_PREFIX=/usr</code>    åœ¨cmakeçš„æ—¶å€™æŒ‡å®š<code>CMAKE_INSTALL_PREFIX</code>å˜é‡çš„è·¯å¾„</li></ul> <h3 id="_8-3-å®‰è£…è„šæœ¬runhello-sh"><a href="#_8-3-å®‰è£…è„šæœ¬runhello-sh" class="header-anchor">#</a> 8.3.å®‰è£…è„šæœ¬runhello.sh</h3> <p>PROGRAMSï¼šéç›®æ ‡æ–‡ä»¶çš„å¯æ‰§è¡Œç¨‹åºå®‰è£…(æ¯”å¦‚è„šæœ¬ä¹‹ç±»)</p> <p><code>INSTALL(PROGRAMS runhello.sh DESTINATION bin)</code></p> <p>è¯´æ˜ï¼šå®é™…å®‰è£…åˆ°çš„æ˜¯<code>/usr/bin</code></p> <h3 id="_8-4-å®‰è£…-doc-ä¸­çš„-hello-txt"><a href="#_8-4-å®‰è£…-doc-ä¸­çš„-hello-txt" class="header-anchor">#</a> 8.4.å®‰è£… doc ä¸­çš„ hello.txt</h3> <ul><li><p>ä¸€ã€æ˜¯é€šè¿‡åœ¨ doc ç›®å½•å»ºç«‹CMakeLists.txt ï¼Œé€šè¿‡installä¸‹çš„file</p></li> <li><p>äºŒã€æ˜¯ç›´æ¥åœ¨å·¥ç¨‹ç›®å½•é€šè¿‡</p> <p><code>INSTALL(DIRECTORY doc/ DESTINATION share/doc/cmake)</code></p></li></ul> <p>DIRECTORY åé¢è¿æ¥çš„æ˜¯æ‰€åœ¨ Source ç›®å½•çš„ç›¸å¯¹è·¯å¾„</p> <p>æ³¨æ„ï¼šabc å’Œ abc/æœ‰å¾ˆå¤§çš„åŒºåˆ«</p> <p>ç›®å½•åä¸ä»¥/ç»“å°¾ï¼šè¿™ä¸ªç›®å½•å°†è¢«å®‰è£…ä¸ºç›®æ ‡è·¯å¾„ä¸‹çš„</p> <p>ç›®å½•åä»¥/ç»“å°¾ï¼šå°†è¿™ä¸ªç›®å½•ä¸­çš„å†…å®¹å®‰è£…åˆ°ç›®æ ‡è·¯å¾„</p> <h3 id="_8-5-å®‰è£…è¿‡ç¨‹"><a href="#_8-5-å®‰è£…è¿‡ç¨‹" class="header-anchor">#</a> 8.5.å®‰è£…è¿‡ç¨‹</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>cmake <span class="token punctuation">..</span>
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_9-é™æ€åº“å’ŒåŠ¨æ€åº“çš„æ„å»º"><a href="#_9-é™æ€åº“å’ŒåŠ¨æ€åº“çš„æ„å»º" class="header-anchor">#</a> 9.é™æ€åº“å’ŒåŠ¨æ€åº“çš„æ„å»º</h2> <p>ä»»åŠ¡ï¼š</p> <p>ï¼‘ï¼Œå»ºç«‹ä¸€ä¸ªé™æ€åº“å’ŒåŠ¨æ€åº“ï¼Œæä¾› HelloFunc å‡½æ•°ä¾›å…¶ä»–ç¨‹åºç¼–ç¨‹ä½¿ç”¨ï¼ŒHelloFunc å‘ç»ˆç«¯è¾“å‡º Hello World å­—ç¬¦ä¸²ã€‚</p> <p>ï¼’ï¼Œå®‰è£…å¤´æ–‡ä»¶ä¸å…±äº«åº“ã€‚</p> <p>é™æ€åº“å’ŒåŠ¨æ€åº“çš„åŒºåˆ«</p> <ul><li>é™æ€åº“çš„æ‰©å±•åä¸€èˆ¬ä¸ºâ€œ.aâ€æˆ–â€œ.libâ€ï¼›åŠ¨æ€åº“çš„æ‰©å±•åä¸€èˆ¬ä¸ºâ€œ.soâ€æˆ–â€œ.dllâ€ã€‚</li> <li>é™æ€åº“åœ¨ç¼–è¯‘æ—¶ä¼šç›´æ¥æ•´åˆåˆ°ç›®æ ‡ç¨‹åºä¸­ï¼Œç¼–è¯‘æˆåŠŸçš„å¯æ‰§è¡Œæ–‡ä»¶å¯ç‹¬ç«‹è¿è¡Œ</li> <li>åŠ¨æ€åº“åœ¨ç¼–è¯‘æ—¶ä¸ä¼šæ”¾åˆ°è¿æ¥çš„ç›®æ ‡ç¨‹åºä¸­ï¼Œå³å¯æ‰§è¡Œæ–‡ä»¶æ— æ³•å•ç‹¬è¿è¡Œã€‚</li></ul> <h3 id="_9-1-æ„å»ºå®ä¾‹"><a href="#_9-1-æ„å»ºå®ä¾‹" class="header-anchor">#</a> 9.1.æ„å»ºå®ä¾‹</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token punctuation">[</span>root@localhost cmake2<span class="token punctuation">]</span># tree
<span class="token punctuation">.</span>
â”œâ”€â”€ build
â”œâ”€â”€ CMakeLists<span class="token punctuation">.</span>txt
â””â”€â”€ lib
    â”œâ”€â”€ CMakeLists<span class="token punctuation">.</span>txt
    â”œâ”€â”€ hello<span class="token punctuation">.</span>cpp
    â””â”€â”€ hello<span class="token punctuation">.</span>h
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>hello.hä¸­çš„å†…å®¹</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HELLO_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">Hello_H</span></span>

<span class="token keyword">void</span> <span class="token function">HelloFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>hello.cppä¸­çš„å†…å®¹</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;hello.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">void</span> <span class="token function">HelloFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Hello World&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>é¡¹ç›®ä¸­çš„cmakeå†…å®¹</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">PROJECT</span><span class="token punctuation">(</span>HELLO<span class="token punctuation">)</span>
<span class="token function">ADD_SUBDIRECTORY</span><span class="token punctuation">(</span>lib bin<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>libä¸­CMakeLists.txtä¸­çš„å†…å®¹</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">SET</span><span class="token punctuation">(</span>LIBHELLO_SRC hello<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token function">ADD_LIBRARY</span><span class="token punctuation">(</span>hello SHARED $<span class="token punctuation">{</span>LIBHELLO_SRC<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_9-2-add-library"><a href="#_9-2-add-library" class="header-anchor">#</a> 9.2.<code>ADD_LIBRARY</code></h3> <p>ADD_LIBRARY(hello SHARED ${LIBHELLO_SRC})</p> <ul><li>helloï¼šå°±æ˜¯æ­£å¸¸çš„åº“åï¼Œç”Ÿæˆçš„åå­—å‰é¢ä¼šåŠ ä¸Šlibï¼Œæœ€ç»ˆäº§ç”Ÿçš„æ–‡ä»¶æ˜¯libhello.so</li> <li>SHAREDï¼ŒåŠ¨æ€åº“    STATICï¼Œé™æ€åº“</li> <li>${LIBHELLO_SRC} ï¼šæºæ–‡ä»¶</li></ul> <h3 id="_9-3-åŒæ—¶æ„å»ºé™æ€å’ŒåŠ¨æ€åº“"><a href="#_9-3-åŒæ—¶æ„å»ºé™æ€å’ŒåŠ¨æ€åº“" class="header-anchor">#</a> 9.3.åŒæ—¶æ„å»ºé™æ€å’ŒåŠ¨æ€åº“</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// å¦‚æœç”¨è¿™ç§æ–¹å¼ï¼Œåªä¼šæ„å»ºä¸€ä¸ªåŠ¨æ€åº“ï¼Œä¸ä¼šæ„å»ºå‡ºé™æ€åº“ï¼Œè™½ç„¶é™æ€åº“çš„åç¼€æ˜¯.a</span>
<span class="token function">ADD_LIBRARY</span><span class="token punctuation">(</span>hello SHARED $<span class="token punctuation">{</span>LIBHELLO_SRC<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">ADD_LIBRARY</span><span class="token punctuation">(</span>hello STATIC $<span class="token punctuation">{</span>LIBHELLO_SRC<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ä¿®æ”¹é™æ€åº“çš„åå­—ï¼Œè¿™æ ·æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¾€å¾€å¸Œæœ›ä»–ä»¬çš„åå­—æ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯åç¼€ä¸åŒè€Œå·²</span>
<span class="token function">ADD_LIBRARY</span><span class="token punctuation">(</span>hello SHARED $<span class="token punctuation">{</span>LIBHELLO_SRC<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">ADD_LIBRARY</span><span class="token punctuation">(</span>hello_static STATIC $<span class="token punctuation">{</span>LIBHELLO_SRC<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_9-4-set-target-properties"><a href="#_9-4-set-target-properties" class="header-anchor">#</a> 9.4.<code>SET_TARGET_PROPERTIES</code></h3> <p>è¿™æ¡æŒ‡ä»¤å¯ä»¥ç”¨æ¥è®¾ç½®è¾“å‡ºçš„åç§°ï¼Œå¯¹äºåŠ¨æ€åº“ï¼Œè¿˜å¯ä»¥ç”¨æ¥æŒ‡å®šåŠ¨æ€åº“ç‰ˆæœ¬å’Œ API ç‰ˆæœ¬</p> <p>åŒæ—¶æ„å»ºé™æ€å’ŒåŠ¨æ€åº“</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">SET</span><span class="token punctuation">(</span>LIBHELLO_SRC hello<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>

<span class="token function">ADD_LIBRARY</span><span class="token punctuation">(</span>hello_static STATIC $<span class="token punctuation">{</span>LIBHELLO_SRC<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//å¯¹hello_staticçš„é‡åä¸ºhello</span>
<span class="token function">SET_TARGET_PROPERTIES</span><span class="token punctuation">(</span>hello_static PROPERTIES  OUTPUT_NAME <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//cmake åœ¨æ„å»ºä¸€ä¸ªæ–°çš„target æ—¶ï¼Œä¼šå°è¯•æ¸…ç†æ‰å…¶ä»–ä½¿ç”¨è¿™ä¸ªåå­—çš„åº“ï¼Œå› ä¸ºï¼Œåœ¨æ„å»º libhello.so æ—¶ï¼Œ å°±ä¼šæ¸…ç†æ‰ libhello.a</span>
<span class="token function">SET_TARGET_PROPERTIES</span><span class="token punctuation">(</span>hello_static PROPERTIES CLEAN_DIRECT_OUTPUT <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token function">ADD_LIBRARY</span><span class="token punctuation">(</span>hello SHARED $<span class="token punctuation">{</span>LIBHELLO_SRC<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">SET_TARGET_PROPERTIES</span><span class="token punctuation">(</span>hello PROPERTIES  OUTPUT_NAME <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
<span class="token function">SET_TARGET_PROPERTIES</span><span class="token punctuation">(</span>hello PROPERTIES CLEAN_DIRECT_OUTPUT <span class="token number">1</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_9-5-åŠ¨æ€åº“çš„ç‰ˆæœ¬å·"><a href="#_9-5-åŠ¨æ€åº“çš„ç‰ˆæœ¬å·" class="header-anchor">#</a> 9.5.åŠ¨æ€åº“çš„ç‰ˆæœ¬å·</h3> <p>ä¸€èˆ¬åŠ¨æ€åº“éƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬å·çš„å…³è”</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>libhello<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">1.2</span>
libhello<span class="token punctuation">.</span>so <span class="token operator">-&gt;</span>libhello<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">1</span>
libhello<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">1</span><span class="token operator">-&gt;</span>libhello<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">1.2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>CMakeLists.txt æ’å…¥å¦‚ä¸‹</p> <p><code>SET_TARGET_PROPERTIES(hello PROPERTIES VERSION 1.2 SOVERSION 1)</code></p> <p>VERSION æŒ‡ä»£åŠ¨æ€åº“ç‰ˆæœ¬ï¼ŒSOVERSION æŒ‡ä»£ API ç‰ˆæœ¬ã€‚</p> <h3 id="_9-6-å®‰è£…å…±äº«åº“å’Œå¤´æ–‡ä»¶"><a href="#_9-6-å®‰è£…å…±äº«åº“å’Œå¤´æ–‡ä»¶" class="header-anchor">#</a> 9.6.å®‰è£…å…±äº«åº“å’Œå¤´æ–‡ä»¶</h3> <p>æœ¬ä¾‹ä¸­æˆ‘ä»¬å°† hello çš„å…±äº«åº“å®‰è£…åˆ°<prefix>/libç›®å½•ï¼Œ</prefix></p> <p>å°† hello.h å®‰è£…åˆ°<prefix>/include/hello ç›®å½•</prefix></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//æ–‡ä»¶æ”¾åˆ°è¯¥ç›®å½•ä¸‹</span>
<span class="token function">INSTALL</span><span class="token punctuation">(</span>FILES hello<span class="token punctuation">.</span>h DESTINATION include<span class="token operator">/</span>hello<span class="token punctuation">)</span>

<span class="token comment">//äºŒè¿›åˆ¶ï¼Œé™æ€åº“ï¼ŒåŠ¨æ€åº“å®‰è£…éƒ½ç”¨TARGETS</span>
<span class="token comment">//ARCHIVE ç‰¹æŒ‡é™æ€åº“ï¼ŒLIBRARY ç‰¹æŒ‡åŠ¨æ€åº“ï¼ŒRUNTIME ç‰¹æŒ‡å¯æ‰§è¡Œç›®æ ‡äºŒè¿›åˆ¶ã€‚</span>
<span class="token function">INSTALL</span><span class="token punctuation">(</span>TARGETS hello hello_static LIBRARY DESTINATION lib ARCHIVE DESTINATION lib<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ³¨æ„ï¼š</p> <p>å®‰è£…çš„æ—¶å€™ï¼ŒæŒ‡å®šä¸€ä¸‹è·¯å¾„ï¼Œæ”¾åˆ°ç³»ç»Ÿä¸‹</p> <p><code>cmake -DCMAKE_INSTALL_PREFIX=/usr ..</code></p> <h3 id="_9-7-ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶"><a href="#_9-7-ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶" class="header-anchor">#</a> 9.7.ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶</h3> <p>å‡†å¤‡å·¥ä½œï¼Œæ–°å»ºä¸€ä¸ªç›®å½•æ¥ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token punctuation">[</span>root@MiWiFi<span class="token operator">-</span>R4CM<span class="token operator">-</span>srv cmake3<span class="token punctuation">]</span># tree
<span class="token punctuation">.</span>
â”œâ”€â”€ build
â”œâ”€â”€ CMakeLists<span class="token punctuation">.</span>txt
â””â”€â”€ src
    â”œâ”€â”€ CMakeLists<span class="token punctuation">.</span>txt
    â””â”€â”€ main<span class="token punctuation">.</span>cpp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>main.cpp</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;hello.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">HelloFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_9-8-è§£å†³-makeåå¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜"><a href="#_9-8-è§£å†³-makeåå¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜" class="header-anchor">#</a> 9.8.è§£å†³ï¼šmakeåå¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜</h3> <p>PSï¼šinclude &lt;hello/hello.h&gt;  è¿™æ ·includeæ˜¯å¯ä»¥ï¼Œè¿™ä¹ˆåšçš„è¯ï¼Œå°±æ²¡å•¥å¥½è®²çš„äº†</p> <p>å…³é”®å­—ï¼šINCLUDE_DIRECTORIES    è¿™æ¡æŒ‡ä»¤å¯ä»¥ç”¨æ¥å‘å·¥ç¨‹æ·»åŠ å¤šä¸ªç‰¹å®šçš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼Œè·¯å¾„ä¹‹é—´ç”¨ç©ºæ ¼åˆ†å‰²</p> <p>åœ¨CMakeLists.txtä¸­åŠ å…¥å¤´æ–‡ä»¶æœç´¢è·¯å¾„</p> <p>INCLUDE_DIRECTORIES(/usr/include/hello)</p> <p>æ„Ÿè°¢ï¼š</p> <p>ç½‘å‹ï¼šzcc720çš„æé†’</p> <h3 id="_9-9-è§£å†³-æ‰¾åˆ°å¼•ç”¨çš„å‡½æ•°é—®é¢˜"><a href="#_9-9-è§£å†³-æ‰¾åˆ°å¼•ç”¨çš„å‡½æ•°é—®é¢˜" class="header-anchor">#</a> 9.9.è§£å†³ï¼šæ‰¾åˆ°å¼•ç”¨çš„å‡½æ•°é—®é¢˜</h3> <p>æŠ¥é”™ä¿¡æ¯ï¼šundefined reference to `HelloFunc()'</p> <p>å…³é”®å­—ï¼šLINK_DIRECTORIES     æ·»åŠ éæ ‡å‡†çš„å…±äº«åº“æœç´¢è·¯å¾„</p> <p>æŒ‡å®šç¬¬ä¸‰æ–¹åº“æ‰€åœ¨è·¯å¾„ï¼ŒLINK_DIRECTORIES(/home/myproject/libs)</p> <p>å…³é”®å­—ï¼šTARGET_LINK_LIBRARIES    æ·»åŠ éœ€è¦é“¾æ¥çš„å…±äº«åº“</p> <p>TARGET_LINK_LIBRARIESçš„æ—¶å€™ï¼Œåªéœ€è¦ç»™å‡ºåŠ¨æ€é“¾æ¥åº“çš„åå­—å°±è¡Œäº†ã€‚</p> <p>åœ¨CMakeLists.txtä¸­æ’å…¥é“¾æ¥å…±äº«åº“ï¼Œä¸»è¦è¦æ’åœ¨executableçš„åé¢</p> <p>æŸ¥çœ‹mainçš„é“¾æ¥æƒ…å†µ</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token punctuation">[</span>root@MiWiFi<span class="token operator">-</span>R4CM<span class="token operator">-</span>srv bin<span class="token punctuation">]</span># ldd main 
	linux<span class="token operator">-</span>vdso<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span>  <span class="token punctuation">(</span><span class="token number">0x00007ffedfda4000</span><span class="token punctuation">)</span>
	libhello<span class="token punctuation">.</span>so <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">/</span>lib64<span class="token operator">/</span>libhello<span class="token punctuation">.</span><span class="token function">so</span> <span class="token punctuation">(</span><span class="token number">0x00007f41c0d8f000</span><span class="token punctuation">)</span>
	libstdc<span class="token operator">++</span><span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">6</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">/</span>lib64<span class="token operator">/</span>libstdc<span class="token operator">++</span><span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">6</span> <span class="token punctuation">(</span><span class="token number">0x00007f41c0874000</span><span class="token punctuation">)</span>
	libm<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">6</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">/</span>lib64<span class="token operator">/</span>libm<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">6</span> <span class="token punctuation">(</span><span class="token number">0x00007f41c0572000</span><span class="token punctuation">)</span>
	libgcc_s<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">/</span>lib64<span class="token operator">/</span>libgcc_s<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">0x00007f41c035c000</span><span class="token punctuation">)</span>
	libc<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">6</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">/</span>lib64<span class="token operator">/</span>libc<span class="token punctuation">.</span>so<span class="token punctuation">.</span><span class="token number">6</span> <span class="token punctuation">(</span><span class="token number">0x00007f41bff8e000</span><span class="token punctuation">)</span>
	<span class="token operator">/</span>lib64<span class="token operator">/</span>ld<span class="token operator">-</span>linux<span class="token operator">-</span>x86<span class="token operator">-</span><span class="token number">64.</span>so<span class="token punctuation">.</span><span class="token number">2</span> <span class="token punctuation">(</span><span class="token number">0x00007f41c0b7c000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>é“¾æ¥é™æ€åº“</p> <p><code>TARGET_LINK_LIBRARIES(main libhello.a)</code></p> <h3 id="_9-10-ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡-cmake-include-path-å’Œ-cmake-library-path"><a href="#_9-10-ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡-cmake-include-path-å’Œ-cmake-library-path" class="header-anchor">#</a> 9.10.ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡ <code>CMAKE_INCLUDE_PATH</code> å’Œ <code>CMAKE_LIBRARY_PATH</code></h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>cmake_include_path
cmake_library_path
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ³¨æ„ï¼šè¿™ä¸¤ä¸ªæ˜¯ç¯å¢ƒå˜é‡è€Œä¸æ˜¯ cmake å˜é‡ï¼Œå¯ä»¥åœ¨linuxçš„bashä¸­è¿›è¡Œè®¾ç½®</p> <p>æˆ‘ä»¬ä¸Šé¢ä¾‹å­ä¸­ä½¿ç”¨äº†ç»å¯¹è·¯å¾„INCLUDE_DIRECTORIES(/usr/include/hello)æ¥æŒ‡æ˜includeè·¯å¾„çš„ä½ç½®</p> <p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡export CMAKE_INCLUDE_PATH=/usr/include/hello</p> <p>è¡¥å……ï¼šç”Ÿäº§debugç‰ˆæœ¬çš„æ–¹æ³•ï¼š
<code>cmake .. -DCMAKE_BUILD_TYPE=debug</code></p> <h2 id="_10-ç¯å¢ƒå˜é‡æ¸…å•"><a href="#_10-ç¯å¢ƒå˜é‡æ¸…å•" class="header-anchor">#</a> 10.ç¯å¢ƒå˜é‡æ¸…å•</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>cmake_include_path CMAKE_INCLUDE_PATH
cmake_library_path CMAKE_LIBRARY_PATH
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_11-å‘-cmake-æ·»åŠ åˆ†ææ ‡å¿—ä»¥ä½¿ç”¨-gprof"><a href="#_11-å‘-cmake-æ·»åŠ åˆ†ææ ‡å¿—ä»¥ä½¿ç”¨-gprof" class="header-anchor">#</a> 11.å‘ CMake æ·»åŠ åˆ†ææ ‡å¿—ä»¥ä½¿ç”¨ gprof</h2> <ul><li>gprofå¯ä»¥ç»Ÿè®¡ç¨‹åºå„ä¸ªå‡½æ•°çš„è¿è¡Œæ—¶é—´ä¸è°ƒç”¨æ¬¡æ•°ï¼Œè¿˜å¯ä»¥ç»™å‡ºå„ä¸ªå‡½æ•°ä¹‹é—´çš„è°ƒç”¨å…³ç³»</li></ul> <p>è¿™é‡Œçš„ä¸€ç³»åˆ—äº‹ä»¶åº”è¯¥å¦‚ä¸‹å·¥ä½œï¼š</p> <ol><li>ä½¿ç”¨ -pg é€‰é¡¹<strong>ç¼–è¯‘</strong>ä»£ç </li> <li>ä½¿ç”¨ -pg é€‰é¡¹<strong>é“¾æ¥</strong>ä»£ç </li> <li>è¿è¡Œç¨‹åº</li> <li>ç¨‹åºç”Ÿæˆ gmon.out æ–‡ä»¶</li> <li>è¿è¡Œ gprof ç¨‹åº</li></ol> <p>è¦æ·»åŠ æ€§èƒ½åˆ†ææ ‡å¿—ï¼Œä½ å¿…é¡»æ·»åŠ åˆ° CMakeLists.txtï¼š</p> <ul><li>CMAKE_CXX_FLAGSæ˜¯C++ç¼–è¯‘éœ€è¦çš„ç¼–è¯‘å‚æ•°</li> <li>CMAKE_C_FLAGSæ˜¯Cç¼–è¯‘æ—¶çš„å‚æ•°</li></ul> <p>cmakeä½¿ç”¨gprof
éœ€è¦åœ¨CMakeLists.txtæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹è„šæœ¬</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>SET<span class="token punctuation">(</span>CMAKE_CXX_FLAGS <span class="token string">&quot;<span class="token variable">${CMAKE_CXX_FLAGS}</span> -pg&quot;</span><span class="token punctuation">)</span>
SET<span class="token punctuation">(</span>CMAKE_C_FLAGS <span class="token string">&quot;<span class="token variable">${CMAKE_C_FLAGS}</span> -pg&quot;</span><span class="token punctuation">)</span>
SET<span class="token punctuation">(</span>CMAKE_EXE_LINKER_FLAGS <span class="token string">&quot;<span class="token variable">${CMAKE_EXE_LINKER_FLAGS}</span> -pg&quot;</span><span class="token punctuation">)</span>
SET<span class="token punctuation">(</span>CMAKE_SHARED_LINKER_FLAGS <span class="token string">&quot;<span class="token variable">${CMAKE_SHARED_LINKER_FLAGS}</span> -pg&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_12-cmake-æŒ‡å®šç¼–è¯‘å™¨ä¸ºgcc-clang"><a href="#_12-cmake-æŒ‡å®šç¼–è¯‘å™¨ä¸ºgcc-clang" class="header-anchor">#</a> 12.CMake æŒ‡å®šç¼–è¯‘å™¨ä¸ºgcc/clang</h2> <ul><li>æ–¹æ³•ä¸€</li></ul> <p>ä½¿ç”¨gcc</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">CC</span><span class="token operator">=</span>/usr/bin/gcc
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CXX</span><span class="token operator">=</span>/usr/bin/g++
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä½¿ç”¨clang</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">CC</span><span class="token operator">=</span>/usr/bin/clang++
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CXX</span><span class="token operator">=</span>/usr/bin/clang++
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>æ–¹æ³•äºŒ</li></ul> <p>åœ¨CMakeLists.txtä¸­ç±»ä¼¼å¦‚ä¸‹çš„ä¿®æ”¹å³å¯</p> <p>æ³¨æ„ï¼Œ<strong>ä¸€å®šè¦å†™åœ¨projectæŒ‡ä»¤ä¹‹å‰</strong>ï¼Œå¦åˆ™æ— æ•ˆã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>SET<span class="token punctuation">(</span>CMAKE_C_COMPILER /usr/bin/gcc<span class="token punctuation">)</span>
SET<span class="token punctuation">(</span>CMAKE_CXX_COMPILER /usr/bin/g++<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li>æœ¬æ–‡ä¸»è¦æ¥æºï¼š<a href="https://www.bilibili.com/video/BV1vR4y1u77h?p=1" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1vR4y1u77h?p=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>https://www.bilibili.com/video/BV1vR4y1u77h/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=ea20f1fccee6fd3f1af7d59cd3ae7575</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4d62c346.js" defer></script><script src="/assets/js/2.1f2e249d.js" defer></script><script src="/assets/js/1.4450334d.js" defer></script><script src="/assets/js/211.ad15a396.js" defer></script>
  </body>
</html>
